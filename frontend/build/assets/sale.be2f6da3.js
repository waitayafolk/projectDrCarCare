import{_ as N}from"./DialogCloseBtn.e7cbc998.js";import{s as f}from"./axios.b493e35e.js";import{S as h}from"./sweetalert2.all.e105506d.js";import{t as A}from"./thaiDateNotime.4f45951f.js";import{y as T,o as u,c,p as t,w as l,bp as y,z as n,A as j,m as a,F as v,a as b,bg as V,bi as D,x as d,b9 as k}from"./index.8bcba7b0.js";import{V as P,a as p}from"./VRow.ca79f027.js";import{V as r}from"./VBtn.df735c9c.js";import{V as w}from"./VTable.a3cc1d32.js";import{V as B}from"./VDialog.1e103c7b.js";import{V as F}from"./VAutocomplete.814069d6.js";import{V as U}from"./VSelect.c9ac9791.js";import{V as S}from"./VChip.61d4f419.js";import{V as z}from"./VTextField.73d11133.js";import"./axios.364130a5.js";import"./scopeId.59e28563.js";import"./easing.36b781ab.js";import"./lazy.3b04c933.js";import"./forwardRefs.c003b6b8.js";import"./VList.477a9145.js";import"./index.d01cf443.js";import"./VDivider.124e65b9.js";import"./VMenu.8d8ff8f0.js";import"./VSelectionControl.10853644.js";const I={components:{},data(){return{openPay:!1,thaiDateNotime:A,tital:"All the best for your new project.",customers:[],service_group:[],service:[],show:!1,detail:!1,billDetail:[],data:{customer_id:null,service_group_id:null,service:[]},bills:[],pay_bill:{bill_id:0,pay:"cash"}}},mounted(){this.getBill(),this.getDataCuctomer(),this.getDataServiceGroup()},methods:{async openModal(){this.data.customer_id=null,this.data.service_group_id=null,this.data.service=[],this.show=!0},async getBill(){await f({method:"get",url:"/endbill/bill",data:[],params:[]}).then(o=>{this.bills=o.data}).catch(o=>{console.log(o)})},async getDataCuctomer(){await f({method:"get",url:"/customers",data:[],params:[]}).then(o=>{for(let s of o.data)s.name=`${s.name} : ${s.mobile}`;this.customers=o.data}).catch(o=>{console.log(o)})},async getDataServiceGroup(){await f({method:"get",url:"/services/group",data:[],params:[]}).then(o=>{this.service_group=o.data}).catch(o=>{console.log(o)})},async getDataService(){await f({method:"get",url:`/services/service_id/${this.data.service_group_id}`,data:[],params:[]}).then(o=>{this.service=o.data}).catch(o=>{console.log(o)})},async choose(o){this.data.service.findIndex(g=>g.id===o.id)==-1&&this.data.service.push({id:o.id,price:o.price,discount:0,name:o.title})},async deleteArray(o){let s=this.data.service.findIndex(g=>g.id===o.id);s>-1&&this.data.service.splice(s,1)},async saveDate(){if(this.data.customer_id==null||this.data.service_group_id==null||this.data.service.length==0)return this.show=!1,h.fire({icon:"error",title:"\u0E23\u0E31\u0E1A\u0E23\u0E16\u0E44\u0E21\u0E48\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",text:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E43\u0E2B\u0E49\u0E04\u0E23\u0E1A !"});await f({method:"post",url:"/endbill",data:this.data,params:[]}).then(o=>{o.status=="success"?(h.fire({icon:"success",title:"\u0E23\u0E31\u0E1A\u0E23\u0E16\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",text:"\u0E23\u0E31\u0E1A\u0E23\u0E16\u0E23\u0E2D\u0E25\u0E49\u0E32\u0E07\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08\u0E41\u0E25\u0E49\u0E27 !"}),this.show=!1,this.getBill()):(h.fire({icon:"error",title:"\u0E23\u0E31\u0E1A\u0E23\u0E16\u0E44\u0E21\u0E48\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",text:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E25\u0E2D\u0E07\u0E43\u0E2B\u0E21\u0E48\u0E2D\u0E35\u0E01\u0E04\u0E23\u0E31\u0E49\u0E07 !"}),this.show=!1)}).catch(o=>{console.log(o)})},async updatePercen(o,s){await f({method:"post",url:"/endbill/update",data:{percen:o,bill_id:s},params:[]}).then(x=>{x.status=="success"?(h.fire({icon:"success",title:"\u0E2D\u0E31\u0E1E\u0E40\u0E14\u0E17\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",text:"\u0E2D\u0E31\u0E1E\u0E40\u0E14\u0E17\u0E2A\u0E16\u0E32\u0E19\u0E30\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08 !"}),this.show=!1,this.getBill()):(h.fire({icon:"error",title:"\u0E2D\u0E31\u0E1E\u0E40\u0E14\u0E17\u0E44\u0E21\u0E48\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",text:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E25\u0E2D\u0E07\u0E43\u0E2B\u0E21\u0E48\u0E2D\u0E35\u0E01\u0E04\u0E23\u0E31\u0E49\u0E07 !"}),this.show=!1)}).catch(x=>{console.log(x)})},async payBill(o){this.openPay=!0,this.pay_bill.bill_id=o.id,this.pay_bill.pay={name:"\u0E40\u0E07\u0E34\u0E19\u0E2A\u0E14",value:"cash"}},async savePay(){await f({method:"post",url:"/endbill/pay",data:this.pay_bill,params:[]}).then(o=>{o.status=="success"?(h.fire({icon:"success",title:"\u0E2D\u0E31\u0E1E\u0E40\u0E14\u0E17\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",text:"\u0E2D\u0E31\u0E1E\u0E40\u0E14\u0E17\u0E2A\u0E16\u0E32\u0E19\u0E30\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08 !"}),this.openPay=!1,this.getBill()):(h.fire({icon:"error",title:"\u0E2D\u0E31\u0E1E\u0E40\u0E14\u0E17\u0E44\u0E21\u0E48\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",text:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E25\u0E2D\u0E07\u0E43\u0E2B\u0E21\u0E48\u0E2D\u0E35\u0E01\u0E04\u0E23\u0E31\u0E49\u0E07 !"}),this.openPay=!1)}).catch(o=>{console.log(o)})}}},G=a("thead",null,[a("tr",null,[a("th",{style:{"text-align":"start"}},"\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08"),a("th",{style:{"text-align":"start"}},"\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17"),a("th",{style:{"text-align":"start"}},"\u0E25\u0E39\u0E01\u0E04\u0E49\u0E32"),a("th",{style:{"text-align":"start"}},"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E25\u0E39\u0E01\u0E04\u0E49\u0E32"),a("th",{style:{"text-align":"start"}},"\u0E41\u0E2D\u0E14\u0E21\u0E34\u0E19\u0E1C\u0E39\u0E49\u0E23\u0E31\u0E1A\u0E1C\u0E34\u0E14\u0E0A\u0E2D\u0E1A"),a("th",{style:{"text-align":"end"}},"\u0E04\u0E48\u0E32\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23"),a("th",{style:{"text-align":"end"}},"\u0E2A\u0E48\u0E27\u0E19\u0E25\u0E14"),a("th",{style:{"text-align":"end"}},"\u0E23\u0E27\u0E21"),a("th",{style:{"text-align":"center"}},"\u0E01\u0E32\u0E23\u0E0A\u0E33\u0E23\u0E30"),a("th",{style:{"text-align":"center"}},"\u0E2A\u0E16\u0E32\u0E19\u0E30"),a("th",{style:{"text-align":"center"}},"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E23\u0E31\u0E1A\u0E23\u0E16"),a("th",{style:{"text-align":"center"}},"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23")])],-1),M={style:{"text-align":"start"}},E={style:{"text-align":"start"}},L={style:{"text-align":"start"}},R={style:{"text-align":"start"}},q={style:{"text-align":"start"}},H={style:{"text-align":"end"}},J={style:{"text-align":"end"}},K={style:{"text-align":"end"}},O={style:{"text-align":"center"}},Q={key:0},W={key:1},X={style:{"text-align":"center"}},Y={key:0},Z={key:1},$={style:{"text-align":"center"}},ee={style:{"text-align":"center"}},te=a("thead",null,[a("tr",null,[a("th",{style:{"text-align":"start"}},"id"),a("th",{style:{"text-align":"start"}},"\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23"),a("th",{style:{"text-align":"end"}},"\u0E04\u0E48\u0E32\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23"),a("th",{style:{"text-align":"center"}})])],-1),le={style:{"text-align":"start"}},ae={style:{"text-align":"start"}},se={style:{"text-align":"end"}},oe={style:{"text-align":"center"}},ie=a("thead",null,[a("tr",null,[a("th",{style:{"text-align":"start"}},"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23"),a("th",{style:{"text-align":"end"}},"\u0E23\u0E32\u0E04\u0E32"),a("th",{style:{"text-align":"end"}},"\u0E2A\u0E48\u0E27\u0E19\u0E25\u0E14"),a("th",{style:{"text-align":"end"}},"\u0E23\u0E27\u0E21")])],-1),ne={style:{"text-align":"start"}},de={style:{"text-align":"end"}},re={style:{"text-align":"end"}},ue={style:{"text-align":"end"}};function ce(o,s,g,x,i,_){const C=N;return u(),c("div",null,[t(V,{class:"mb-6",title:"\u0E23\u0E31\u0E1A\u0E23\u0E16"},{default:l(()=>[t(y,null,{default:l(()=>[t(P,null,{default:l(()=>[t(p,{cols:"6",md:"6"},{default:l(()=>[n(" \u0E23\u0E31\u0E1A\u0E23\u0E16\u0E40\u0E02\u0E49\u0E32\u0E25\u0E49\u0E32\u0E07 ")]),_:1}),t(p,{class:"text-end",cols:"6",md:"6"},{default:l(()=>[t(r,{color:"primary",onClick:s[0]||(s[0]=e=>_.openModal())},{default:l(()=>[t(j,{start:"",icon:"tabler-receipt"}),n(" \u0E23\u0E31\u0E1A\u0E23\u0E16\u0E25\u0E39\u0E01\u0E04\u0E49\u0E32 ")]),_:1})]),_:1})]),_:1}),t(w,{"fixed-header":"",density:"compact",class:"text-no-wrap"},{default:l(()=>[G,a("tbody",null,[(u(!0),c(v,null,b(i.bills,e=>(u(),c("tr",null,[a("td",M,d(e.percen)+" %",1),a("td",E,d(e.name_service),1),a("td",L,d(e.name_customer),1),a("td",R,d(e.mobile),1),a("td",q,d(e.name_admin),1),a("td",H,d(e.price),1),a("td",J,d(e.discount),1),a("td",K,d(e.total),1),a("th",O,[e.pay=="no"?(u(),c("div",Q,[t(r,{size:"small",color:"error",onClick:m=>_.payBill(e),block:"",class:"mt-1"},{default:l(()=>[n(" \u0E22\u0E31\u0E07\u0E44\u0E21\u0E48\u0E0A\u0E33\u0E23\u0E30 ")]),_:2},1032,["onClick"])])):k("",!0),e.pay=="yes"?(u(),c("div",W,[t(r,{size:"small",color:"success",block:"",class:"mt-1"},{default:l(()=>[n(" \u0E0A\u0E33\u0E23\u0E30\u0E41\u0E25\u0E49\u0E27 "+d(e.pay_type=="cash"?"\u0E40\u0E07\u0E34\u0E19\u0E2A\u0E14":"\u0E40\u0E07\u0E34\u0E19\u0E42\u0E2D\u0E19"),1)]),_:2},1024)])):k("",!0)]),a("th",X,[e.status=="success"?(u(),c("div",Y,[t(S,{color:"success"},{default:l(()=>[n("\u0E40\u0E2A\u0E23\u0E47\u0E08\u0E41\u0E25\u0E49\u0E27")]),_:1})])):k("",!0),e.status=="wait"?(u(),c("div",Z,[t(S,{color:"error"},{default:l(()=>[n("\u0E01\u0E33\u0E25\u0E31\u0E07\u0E25\u0E49\u0E32\u0E07")]),_:1})])):k("",!0)]),a("td",$,d(i.thaiDateNotime(e.created_date)),1),a("td",ee,[a("td",null,[t(r,{size:"small",color:"primary",onClick:m=>{i.detail=!0,i.billDetail=e.detail},block:"",class:"mt-1"},{default:l(()=>[n(" \u0E23\u0E32\u0E22\u0E01\u0E32\u0E23 ")]),_:2},1032,["onClick"]),t(r,{disabled:e.percen==100,size:"small",color:"info",onClick:m=>_.updatePercen(30,e.id),block:"",class:"mt-1"},{default:l(()=>[n(" \u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08 30% ")]),_:2},1032,["disabled","onClick"]),t(r,{disabled:e.percen==100,size:"small",color:"info",onClick:m=>_.updatePercen(100,e.id),block:"",class:"mt-1"},{default:l(()=>[n(" \u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08 100% ")]),_:2},1032,["disabled","onClick"]),t(r,{target:"_blank",href:`/bill?bill_id=${e.id}`,size:"small",color:"success",block:"",class:"mt-1"},{default:l(()=>[n(" \u0E1A\u0E34\u0E25 ")]),_:2},1032,["href"])])])]))),256))])]),_:1})]),_:1}),t(B,{modelValue:i.show,"onUpdate:modelValue":s[7]||(s[7]=e=>i.show=e),"max-width":"800"},{default:l(()=>[t(C,{onClick:s[1]||(s[1]=e=>i.show=!1)}),t(V,null,{default:l(()=>[t(D,null,{default:l(()=>[n(" \u0E23\u0E31\u0E1A\u0E23\u0E16\u0E25\u0E39\u0E01\u0E04\u0E49\u0E32 ")]),_:1}),t(y,null,{default:l(()=>[t(P,null,{default:l(()=>[t(p,{cols:"12"},{default:l(()=>[t(F,{modelValue:i.data.customer_id,"onUpdate:modelValue":s[2]||(s[2]=e=>i.data.customer_id=e),label:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E23\u0E32\u0E22\u0E0A\u0E37\u0E48\u0E2D\u0E25\u0E39\u0E01\u0E04\u0E49\u0E32","auto-select-first":"",items:i.customers,"hide-no-data":"","hide-selected":"","item-title":"name","item-value":"id","item-no":"bank_no",class:"mb-3"},null,8,["modelValue","items"])]),_:1}),t(p,{cols:"12"},{default:l(()=>[t(U,{modelValue:i.data.service_group_id,"onUpdate:modelValue":s[3]||(s[3]=e=>i.data.service_group_id=e),items:i.service_group,"item-title":"name","item-value":"id",label:"\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E15\u0E48\u0E32\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23","persistent-hint":""},null,8,["modelValue","items"])]),_:1}),t(p,{cols:"12"},{default:l(()=>[t(r,{color:"primary",onClick:s[4]||(s[4]=e=>_.getDataService())},{default:l(()=>[n(" \u0E04\u0E49\u0E19\u0E2B\u0E32\u0E04\u0E48\u0E32\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23 ")]),_:1})]),_:1}),t(p,{cols:"12"},{default:l(()=>[t(w,{"fixed-header":"",density:"compact",class:"text-no-wrap"},{default:l(()=>[te,a("tbody",null,[(u(!0),c(v,null,b(i.service,e=>(u(),c("tr",null,[a("td",le,d(e.id),1),a("td",ae,d(e.title),1),a("td",se,d(e.price),1),a("td",oe,[t(r,{variant:"tonal",color:"primary",onClick:m=>_.choose(e)},{default:l(()=>[n(" \u0E40\u0E25\u0E37\u0E2D\u0E01 ")]),_:2},1032,["onClick"])])]))),256))])]),_:1})]),_:1}),(u(!0),c(v,null,b(i.data.service,e=>(u(),c("div",null,[t(P,{style:{padding:"5px"}},{default:l(()=>[t(p,{style:{padding:"15px"},cols:"3",md:"3"},{default:l(()=>[n(" \u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23 : "+d(e.name)+" ",1)]),_:2},1024),t(p,{cols:"2",md:"2"},{default:l(()=>[t(z,{type:"number",modelValue:e.price,"onUpdate:modelValue":m=>e.price=m,label:"\u0E04\u0E48\u0E32\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(p,{cols:"2",md:"2"},{default:l(()=>[t(z,{type:"number",modelValue:e.discount,"onUpdate:modelValue":m=>e.discount=m,label:"\u0E2A\u0E48\u0E27\u0E19\u0E25\u0E14"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(p,{style:{padding:"15px"},cols:"3",md:"3"},{default:l(()=>[n(" \u0E23\u0E27\u0E21 : "+d(e.price-e.discount),1)]),_:2},1024),t(p,{cols:"1",md:"1"},{default:l(()=>[t(r,{variant:"tonal",color:"error",onClick:m=>_.deleteArray(e)},{default:l(()=>[n(" \u0E25\u0E1A ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]))),256))]),_:1})]),_:1}),t(y,{class:"d-flex justify-end flex-wrap gap-3"},{default:l(()=>[t(r,{variant:"tonal",color:"secondary",onClick:s[5]||(s[5]=e=>i.show=!1)},{default:l(()=>[n(" \u0E1B\u0E34\u0E14 ")]),_:1}),t(r,{color:"primary",onClick:s[6]||(s[6]=e=>_.saveDate())},{default:l(()=>[n(" \u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(B,{modelValue:i.detail,"onUpdate:modelValue":s[10]||(s[10]=e=>i.detail=e),"max-width":"800"},{default:l(()=>[t(C,{onClick:s[8]||(s[8]=e=>i.detail=!1)}),t(V,null,{default:l(()=>[t(D,null,{default:l(()=>[n(" \u0E23\u0E32\u0E22\u0E01\u0E32\u0E23 ")]),_:1}),t(y,null,{default:l(()=>[t(w,{"fixed-header":"",density:"compact",class:"text-no-wrap"},{default:l(()=>[ie,a("tbody",null,[(u(!0),c(v,null,b(i.billDetail,e=>(u(),c("tr",null,[a("td",ne,d(e.title),1),a("td",de,d(e.price),1),a("td",re,d(e.discount),1),a("td",ue,d(e.total),1)]))),256))])]),_:1})]),_:1}),t(y,{class:"d-flex justify-end flex-wrap gap-3"},{default:l(()=>[t(r,{variant:"tonal",color:"secondary",onClick:s[9]||(s[9]=e=>i.detail=!1)},{default:l(()=>[n(" \u0E1B\u0E34\u0E14 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(B,{modelValue:i.openPay,"onUpdate:modelValue":s[15]||(s[15]=e=>i.openPay=e),"max-width":"800"},{default:l(()=>[t(C,{onClick:s[11]||(s[11]=e=>i.openPay=!1)}),t(V,null,{default:l(()=>[t(D,null,{default:l(()=>[n(" \u0E0A\u0E33\u0E23\u0E30\u0E1A\u0E34\u0E25 ")]),_:1}),t(y,null,{default:l(()=>[t(w,{"fixed-header":"",density:"compact",class:"text-no-wrap"},{default:l(()=>[t(p,{cols:"12"},{default:l(()=>[t(U,{modelValue:i.pay_bill.pay,"onUpdate:modelValue":s[12]||(s[12]=e=>i.pay_bill.pay=e),items:[{name:"\u0E40\u0E07\u0E34\u0E19\u0E2A\u0E14",value:"cash"},{name:"\u0E40\u0E07\u0E34\u0E19\u0E42\u0E2D\u0E19",value:"credit"}],"item-title":"name","item-value":"value",label:"\u0E25\u0E39\u0E01\u0E04\u0E49\u0E32","persistent-hint":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(y,{class:"d-flex justify-end flex-wrap gap-3"},{default:l(()=>[t(r,{variant:"tonal",color:"secondary",onClick:s[13]||(s[13]=e=>i.openPay=!1)},{default:l(()=>[n(" \u0E1B\u0E34\u0E14 ")]),_:1}),t(r,{color:"primary",onClick:s[14]||(s[14]=e=>_.savePay())},{default:l(()=>[n(" \u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})])}const je=T(I,[["render",ce]]);export{je as default};
