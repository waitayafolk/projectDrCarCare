import{_ as k}from"./DialogCloseBtn.e584b7a2.js";import{s as f}from"./axios.4960f1a7.js";import{y as D,bn as N,bo as B,o as c,c as u,m as i,p as e,w as l,A as _,z as r,a1 as T,a2 as G,bq as O,F as U,a as z,bg as V,bi as I,bp as x,x as h,b9 as y}from"./index.7138b669.js";import{f as F}from"./helpers.segment.1007a634.js";import{d as J,t as j}from"./derlimiter.d68341e6.js";import{S as m}from"./sweetalert2.all.e105506d.js";import{a as n,V as w}from"./VRow.71f27439.js";import{V as p}from"./VBtn.a6b3b781.js";import{V as q}from"./VTable.d94d2277.js";import{V as v}from"./VTextField.e3a82c45.js";import{a as L}from"./VSelect.53fd42df.js";import{V as M}from"./VDialog.b6576d0e.js";import{V as b}from"./VChip.5acfabce.js";import"./axios.364130a5.js";import"./index.0ab14008.js";import"./easing.36b781ab.js";import"./forwardRefs.c003b6b8.js";import"./VList.a1d44376.js";import"./VDivider.4e8da04b.js";import"./scopeId.8cf76934.js";import"./lazy.858355b6.js";import"./VMenu.7f2b4ed7.js";import"./VSelectionControl.234f4b9e.js";const R={name:"user-profile",computed:{moment(){return N}},data(){return{loading:!0,derlimiter:J,thaiDateNotime:j,pagination:[],page:1,route:B(),show:!1,servicesGroup:[],service:{id:0,title:"",detail:"",price:0,status:!1,admin_id:JSON.parse(localStorage.getItem("user_data")).id,service_group_id:0},services:[]}},methods:{formatNumber:F,async getData(){this.loading=!0,await f({method:"get",url:"/services",data:[],params:[]}).then(a=>{this.services=a.data,this.loading=!1}).catch(a=>{console.log(a)})},async saveData(){let a={id:this.service.id,title:this.service.title,detail:this.service.detail,price:this.service.price,status:!0,admin_id:JSON.parse(localStorage.getItem("user_data")).id,service_group_id:this.service.service_group_id.id};await f({method:"post",url:"/services/save-service",data:a,params:[]}).then(t=>{t.status=="success"&&(m.fire({icon:"success",title:"Success",text:t.message}),this.show=!1,this.getData())}).catch(t=>{console.log(t),this.show=!1,m.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})})},async openModal(){this.show=!0,this.service={id:0,title:"",detail:"",price:0,status:!1,admin_id:JSON.parse(localStorage.getItem("user_data")).id}},async deleteService(a){m.fire({title:"\u0E17\u0E33\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23?",text:"\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E25\u0E1A\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes"}).then(async t=>{t.isConfirmed&&await f({method:"delete",url:`/services/${a.id}`,data:[],params:[]}).then(d=>{d.status=="success"&&(m.fire({icon:"success",title:"Success",text:d.message}),this.show=!1,this.getData())}).catch(d=>{console.log(d),this.show=!1,m.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})})})},async getDataGroup(){this.loading=!0,await f({method:"get",url:"/services/group",data:[],params:[]}).then(a=>{this.servicesGroup=a.data}).catch(a=>{console.log(a)})}},mounted(){this.getData(),this.getDataGroup()}},A={mode:"out-in"},E=i("h1",null,"\u0E08\u0E31\u0E14\u0E01\u0E32\u0E23\u0E04\u0E48\u0E32\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23",-1),P={class:"v-overlay--absolute text-center w-100 h-100",style:{"background-color":"rgba(255,255,255,.8)","z-index":"9"}},Y=i("thead",null,[i("tr",null,[i("th",{style:{"text-align":"start"}},"\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23"),i("th",{style:{"text-align":"start"}},"\u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14"),i("th",{style:{"text-align":"start"}},"\u0E04\u0E48\u0E32\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23"),i("th",{style:{"text-align":"center"}},"\u0E2A\u0E16\u0E32\u0E19\u0E30"),i("th",{style:{"text-align":"center"}},"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E2A\u0E23\u0E49\u0E32\u0E07"),i("th",{style:{"text-align":"center"}},"\u0E41\u0E01\u0E49\u0E44\u0E02")])],-1),H={style:{"text-align":"start"}},K={style:{"text-align":"start"}},Q={style:{"text-align":"start"}},W={style:{"text-align":"center"}},X={key:0},Z={key:1},$={style:{"text-align":"center"}},ee={style:{"text-align":"center"}};function te(a,t,d,se,o,g){const C=k;return c(),u("div",null,[i("div",A,[e(w,{class:"mb-3"},{default:l(()=>[e(n,null,{default:l(()=>[E]),_:1}),e(n,{md:"2",class:"text-end"},{default:l(()=>[e(p,{onClick:t[0]||(t[0]=s=>g.openModal())},{default:l(()=>[e(_,{start:"",icon:"tabler-square-rounded-plus-filled"}),r(" \u0E40\u0E1E\u0E34\u0E48\u0E21\u0E04\u0E48\u0E32\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23 ")]),_:1})]),_:1})]),_:1})]),e(V,null,{default:l(()=>[T(i("div",P,[e(O,{indeterminate:"",color:"primary"})],512),[[G,o.loading]]),e(q,{"fixed-header":"",density:"compact",class:"text-no-wrap"},{default:l(()=>[Y,i("tbody",null,[(c(!0),u(U,null,z(o.services,s=>(c(),u("tr",null,[i("td",H,h(s.title),1),i("td",K,h(s.detail),1),i("td",Q,h(s.price),1),i("td",W,[s.status==!0?(c(),u("div",X,[e(b,{color:"success"},{default:l(()=>[r("\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19")]),_:1})])):y("",!0),s.status==!1?(c(),u("div",Z,[e(b,{color:"error"},{default:l(()=>[r("\u0E44\u0E21\u0E48\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19")]),_:1})])):y("",!0)]),i("td",$,h(o.thaiDateNotime(s.create_date)),1),i("td",ee,[e(p,{size:"small",color:"error",onClick:S=>g.deleteService(s)},{default:l(()=>[e(_,{start:"",icon:"tabler-trash"}),r(" \u0E25\u0E1A ")]),_:2},1032,["onClick"]),e(p,{size:"small",color:"primary",onClick:S=>(o.service=s,o.show=!0)},{default:l(()=>[e(_,{start:"",icon:"tabler-edit"}),r(" \u0E41\u0E01\u0E49\u0E44\u0E02 ")]),_:2},1032,["onClick"])])]))),256))])]),_:1})]),_:1}),e(M,{modelValue:o.show,"onUpdate:modelValue":t[8]||(t[8]=s=>o.show=s),"max-width":"800"},{default:l(()=>[e(C,{onClick:t[1]||(t[1]=s=>o.show=!1)}),e(V,null,{default:l(()=>[e(I,null,{default:l(()=>[r(" \u0E08\u0E31\u0E14\u0E01\u0E32\u0E23\u0E04\u0E48\u0E32\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23 ")]),_:1}),e(x,null,{default:l(()=>[e(w,null,{default:l(()=>[e(n,{cols:"6",md:"6"},{default:l(()=>[e(v,{type:"text",modelValue:o.service.title,"onUpdate:modelValue":t[2]||(t[2]=s=>o.service.title=s),label:"\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23"},null,8,["modelValue"])]),_:1}),e(n,{cols:"6",md:"6"},{default:l(()=>[e(v,{type:"number",modelValue:o.service.price,"onUpdate:modelValue":t[3]||(t[3]=s=>o.service.price=s),label:"\u0E23\u0E32\u0E04\u0E32\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23"},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",md:"12"},{default:l(()=>[e(v,{type:"text",modelValue:o.service.detail,"onUpdate:modelValue":t[4]||(t[4]=s=>o.service.detail=s),label:"\u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14"},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",md:"12"},{default:l(()=>[e(L,{modelValue:o.service.service_group_id,"onUpdate:modelValue":t[5]||(t[5]=s=>o.service.service_group_id=s),items:o.servicesGroup,"item-title":"name","item-value":"id",label:"Select","persistent-hint":"","return-object":"","single-line":""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e(x,{class:"d-flex justify-end flex-wrap gap-3"},{default:l(()=>[e(p,{variant:"tonal",color:"secondary",onClick:t[6]||(t[6]=s=>o.show=!1)},{default:l(()=>[r(" \u0E1B\u0E34\u0E14 ")]),_:1}),e(p,{color:"primary",onClick:t[7]||(t[7]=s=>g.saveData())},{default:l(()=>[r(" \u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const ke=D(R,[["render",te]]);export{ke as default};
