import{_ as C}from"./DialogCloseBtn.7f629336.js";import{y as S,bp as D,bq as k,bd as h,o as f,c as v,m as l,p as t,w as i,bm as d,A as g,z as n,bl as x,a1 as N,a2 as B,bs as G,F as T,a as I,bh as V,bj as O,br as y,x as c,b9 as U}from"./index.982c45c7.js";import{f as z}from"./helpers.segment.1007a634.js";import{t as j}from"./thaiDateNotime.28095d2c.js";import{d as F}from"./derlimiter.4329166e.js";import{S as u}from"./sweetalert2.all.e105506d.js";import{V as m}from"./VBtn.dd0be6a2.js";import{V as J}from"./VTable.72454dd9.js";import{V as _}from"./VTextField.7da1d2e1.js";import{V as q}from"./VSelect.4de40e7b.js";import{V as L}from"./VDialog.0df03e9e.js";import{V as M}from"./VChip.be025994.js";import"./index.bec81b91.js";import"./easing.36b781ab.js";import"./forwardRefs.c003b6b8.js";import"./VList.c778578d.js";import"./VDivider.960e3676.js";import"./scopeId.77e27523.js";import"./lazy.33f651dc.js";import"./VMenu.75647eec.js";import"./VSelectionControl.441b23c7.js";const R={name:"user-profile",computed:{moment(){return D}},data(){return{loading:!0,derlimiter:F,thaiDateNotime:j,pagination:[],page:1,route:k(),show:!1,servicesGroup:[],service:{id:0,title:"",detail:"",price:0,status:!1,admin_id:JSON.parse(localStorage.getItem("user_data")).id,service_group_id:0},services:[]}},methods:{formatNumber:z,async getData(){this.loading=!0,await h({method:"get",url:"/services",data:[],params:[]}).then(a=>{this.services=a.data,this.loading=!1}).catch(a=>{console.log(a)})},async saveData(){let a={id:this.service.id,title:this.service.title,detail:this.service.detail,price:this.service.price,status:!0,admin_id:JSON.parse(localStorage.getItem("user_data")).id,service_group_id:this.service.service_group_id.id==null?this.service.service_group_id:this.service.service_group_id.id};await h({method:"post",url:"/services/save-service",data:a,params:[]}).then(e=>{e.status=="success"&&(u.fire({icon:"success",title:"Success",text:e.message}),this.show=!1,this.getData())}).catch(e=>{console.log(e),this.show=!1,u.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})})},async openModal(){this.show=!0,this.service={id:0,title:"",detail:"",price:0,status:!1,admin_id:JSON.parse(localStorage.getItem("user_data")).id}},async deleteService(a){u.fire({title:"\u0E17\u0E33\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23?",text:"\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E25\u0E1A\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes"}).then(async e=>{e.isConfirmed&&await h({method:"delete",url:`/services/${a.id}`,data:[],params:[]}).then(o=>{o.status=="success"&&(u.fire({icon:"success",title:"Success",text:o.message}),this.show=!1,this.getData())}).catch(o=>{console.log(o),this.show=!1,u.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})})})},async getDataGroup(){this.loading=!0,await h({method:"get",url:"/services/group",data:[],params:[]}).then(a=>{let e=[];for(let o of a.data)e.push({id:o.id,name:o.name});this.servicesGroup=e}).catch(a=>{console.log(a)})},async editData(a){this.service.id=a.id,this.service.detail=a.detail,this.service.price=a.price,this.service.title=a.title;let e=this.servicesGroup.findIndex(o=>o.id===a.service_group_id);this.service.service_group_id=this.servicesGroup[e],this.show=!0}},mounted(){this.getData(),this.getDataGroup()}},A={mode:"out-in"},E=l("h1",null,"\u0E08\u0E31\u0E14\u0E01\u0E32\u0E23\u0E04\u0E48\u0E32\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23",-1),P={class:"v-overlay--absolute text-center w-100 h-100",style:{"background-color":"rgba(255,255,255,.8)","z-index":"9"}},Y=l("thead",null,[l("tr",null,[l("th",{style:{"text-align":"start"}},"\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23"),l("th",{style:{"text-align":"start"}},"\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23"),l("th",{style:{"text-align":"start"}},"\u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14"),l("th",{style:{"text-align":"start"}},"\u0E04\u0E48\u0E32\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23"),l("th",{style:{"text-align":"center"}},"\u0E2A\u0E16\u0E32\u0E19\u0E30"),l("th",{style:{"text-align":"center"}},"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E2A\u0E23\u0E49\u0E32\u0E07"),l("th",{style:{"text-align":"center"}},"\u0E41\u0E01\u0E49\u0E44\u0E02")])],-1),H={style:{"text-align":"start"}},K={style:{"text-align":"start"}},Q={style:{"text-align":"start"}},W={style:{"text-align":"start"}},X={style:{"text-align":"center"}},Z={key:0},$={style:{"text-align":"center"}},ee={style:{"text-align":"center"}};function te(a,e,o,se,r,p){const w=C;return f(),v("div",null,[l("div",A,[t(x,{class:"mb-3"},{default:i(()=>[t(d,null,{default:i(()=>[E]),_:1}),t(d,{md:"2",class:"text-end"},{default:i(()=>[t(m,{onClick:e[0]||(e[0]=s=>p.openModal())},{default:i(()=>[t(g,{start:"",icon:"tabler-square-rounded-plus-filled"}),n(" \u0E40\u0E1E\u0E34\u0E48\u0E21\u0E04\u0E48\u0E32\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23 ")]),_:1})]),_:1})]),_:1})]),t(V,null,{default:i(()=>[N(l("div",P,[t(G,{indeterminate:"",color:"primary"})],512),[[B,r.loading]]),t(J,{"fixed-header":"",density:"compact",class:"text-no-wrap"},{default:i(()=>[Y,l("tbody",null,[(f(!0),v(T,null,I(r.services,s=>(f(),v("tr",null,[l("td",H,c(s.title),1),l("td",K,c(s.name),1),l("td",Q,c(s.detail),1),l("td",W,c(s.price),1),l("td",X,[s.status=="use"?(f(),v("div",Z,[t(M,{color:"success"},{default:i(()=>[n("\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19")]),_:1})])):U("",!0)]),l("td",$,c(r.thaiDateNotime(s.create_date)),1),l("td",ee,[t(m,{size:"small",color:"error",onClick:b=>p.deleteService(s)},{default:i(()=>[t(g,{start:"",icon:"tabler-trash"}),n(" \u0E25\u0E1A ")]),_:2},1032,["onClick"]),t(m,{size:"small",color:"primary",onClick:b=>p.editData(s)},{default:i(()=>[t(g,{start:"",icon:"tabler-edit"}),n(" \u0E41\u0E01\u0E49\u0E44\u0E02 ")]),_:2},1032,["onClick"])])]))),256))])]),_:1})]),_:1}),t(L,{modelValue:r.show,"onUpdate:modelValue":e[8]||(e[8]=s=>r.show=s),"max-width":"800"},{default:i(()=>[t(w,{onClick:e[1]||(e[1]=s=>r.show=!1)}),t(V,null,{default:i(()=>[t(O,null,{default:i(()=>[n(" \u0E08\u0E31\u0E14\u0E01\u0E32\u0E23\u0E04\u0E48\u0E32\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23 ")]),_:1}),t(y,null,{default:i(()=>[t(x,null,{default:i(()=>[t(d,{cols:"6",md:"6"},{default:i(()=>[t(_,{type:"text",modelValue:r.service.title,"onUpdate:modelValue":e[2]||(e[2]=s=>r.service.title=s),label:"\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23"},null,8,["modelValue"])]),_:1}),t(d,{cols:"6",md:"6"},{default:i(()=>[t(_,{type:"number",modelValue:r.service.price,"onUpdate:modelValue":e[3]||(e[3]=s=>r.service.price=s),label:"\u0E23\u0E32\u0E04\u0E32\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23"},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",md:"12"},{default:i(()=>[t(_,{type:"text",modelValue:r.service.detail,"onUpdate:modelValue":e[4]||(e[4]=s=>r.service.detail=s),label:"\u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14"},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",md:"12"},{default:i(()=>[t(q,{modelValue:r.service.service_group_id,"onUpdate:modelValue":e[5]||(e[5]=s=>r.service.service_group_id=s),items:r.servicesGroup,"item-title":"name","item-value":"id",label:"Select","persistent-hint":"","return-object":"","single-line":""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),t(y,{class:"d-flex justify-end flex-wrap gap-3"},{default:i(()=>[t(m,{variant:"tonal",color:"secondary",onClick:e[6]||(e[6]=s=>r.show=!1)},{default:i(()=>[n(" \u0E1B\u0E34\u0E14 ")]),_:1}),t(m,{color:"primary",onClick:e[7]||(e[7]=s=>p.saveData())},{default:i(()=>[n(" \u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const Ce=S(R,[["render",te]]);export{Ce as default};
