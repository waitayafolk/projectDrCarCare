import{_ as B}from"./DialogCloseBtn.c4d6e4c7.js";import{y as T,bp as U,bq as j,bd as h,o as u,c as d,m as e,p as t,w as l,bm as f,A as p,z as r,bl as y,a1 as F,a2 as q,bs as L,F as v,a as C,bh as k,bj as D,br as _,x as i,b9 as N}from"./index.86c412e1.js";import{f as M}from"./helpers.segment.1007a634.js";import{t as O}from"./thaiDateNotime.28095d2c.js";import{d as R}from"./derlimiter.4329166e.js";import{S as g}from"./sweetalert2.all.e105506d.js";import{V as c}from"./VBtn.109c336b.js";import{V as S}from"./VTable.9dbe4a5b.js";import{V as w}from"./VTextField.c9631f5f.js";import{V as P}from"./VDialog.357c36fa.js";import{V as z}from"./VChip.dfffcf8f.js";import"./index.beaccebb.js";import"./easing.36b781ab.js";import"./forwardRefs.c003b6b8.js";import"./scopeId.521ae612.js";import"./lazy.72574a30.js";const A={name:"user-profile",computed:{moment(){return U}},data(){return{licen:"",showpacket:!1,loading:!0,derlimiter:R,thaiDateNotime:O,pagination:[],page:1,route:j(),show:!1,customer:{id:0,mobile:"",name:"",status:!1},packets:[],customers:[]}},methods:{formatNumber:M,async getData(){this.loading=!0,await h({method:"get",url:"/customers",data:[],params:[]}).then(n=>{this.customers=n.data,this.loading=!1}).catch(n=>{console.log(n)})},async getDataPacket(){this.loading=!0,await h({method:"get",url:"/packet",data:[],params:[]}).then(n=>{this.packets=n.data}).catch(n=>{console.log(n)})},async saveData(){await h({method:"post",url:"/customers/save-customer",data:this.customer,params:[]}).then(n=>{n.status=="success"&&(g.fire({icon:"success",title:"Success",text:n.message}),this.show=!1,this.getData())}).catch(n=>{console.log(n),this.show=!1,g.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})})},async openModal(){this.show=!0,this.customer={id:0,mobile:"",name:"",status:!1}},async buyPacket(n){let o={licen:this.licen,customer_id:this.customer.id,packet_id:n.id,count:n.count,price:n.price};await h({method:"post",url:"/packet/save-packet",data:o,params:[]}).then(m=>{m.status=="success"&&(this.showpacket=!1,g.fire({icon:"success",title:"Success",text:m.message}))}).catch(m=>{console.log(m),this.show=!1,g.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})}),console.log(o)}},mounted(){this.getData(),this.getDataPacket()}},E={mode:"out-in"},I=e("h1",null,"\u0E08\u0E31\u0E14\u0E01\u0E32\u0E23\u0E25\u0E39\u0E01\u0E04\u0E49\u0E32",-1),G={class:"v-overlay--absolute text-center w-100 h-100",style:{"background-color":"rgba(255,255,255,.8)","z-index":"9"}},H=e("thead",null,[e("tr",null,[e("th",{style:{"text-align":"start"}},"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23"),e("th",{style:{"text-align":"start"}},"\u0E0A\u0E37\u0E48\u0E2D"),e("th",{style:{"text-align":"center"}},"\u0E2A\u0E16\u0E32\u0E19\u0E30"),e("th",{style:{"text-align":"center"}},"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E2A\u0E23\u0E49\u0E32\u0E07"),e("th",{style:{"text-align":"start"}},"\u0E41\u0E01\u0E49\u0E44\u0E02")])],-1),J={style:{"text-align":"start"}},K={style:{"text-align":"start"}},Q={style:{"text-align":"center"}},W={key:0},X={key:1},Y={style:{"text-align":"center"}},Z={style:{"text-align":"center"}},$=e("thead",null,[e("tr",null,[e("th",{style:{"text-align":"start"}},"\u0E0A\u0E37\u0E48\u0E2D"),e("th",{style:{"text-align":"start"}},"\u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14"),e("th",{style:{"text-align":"end"}},"\u0E23\u0E32\u0E04\u0E32"),e("th",{style:{"text-align":"end"}},"\u0E08\u0E33\u0E19\u0E27\u0E19\u0E25\u0E49\u0E32\u0E07"),e("th",{style:{"text-align":"center"}},"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E2A\u0E23\u0E49\u0E32\u0E07"),e("th",{style:{"text-align":"center"}})])],-1),tt={style:{"text-align":"start"}},et={style:{"text-align":"start"}},st={style:{"text-align":"end"}},lt={style:{"text-align":"end"}},ot={style:{"text-align":"center"}},at={style:{"text-align":"center"}};function nt(n,o,m,rt,a,x){const V=B;return u(),d("div",null,[e("div",E,[t(y,{class:"mb-3"},{default:l(()=>[t(f,null,{default:l(()=>[I]),_:1}),t(f,{md:"2",class:"text-end"},{default:l(()=>[t(c,{onClick:o[0]||(o[0]=s=>x.openModal())},{default:l(()=>[t(p,{start:"",icon:"tabler-square-rounded-plus-filled"}),r(" \u0E40\u0E1E\u0E34\u0E48\u0E21\u0E25\u0E39\u0E01\u0E04\u0E49\u0E32 ")]),_:1})]),_:1})]),_:1})]),t(k,null,{default:l(()=>[F(e("div",G,[t(L,{indeterminate:"",color:"primary"})],512),[[q,a.loading]]),t(S,{"fixed-header":"",density:"compact",class:"text-no-wrap"},{default:l(()=>[H,e("tbody",null,[(u(!0),d(v,null,C(a.customers,s=>(u(),d("tr",null,[e("td",J,i(s.mobile),1),e("td",K,i(s.name),1),e("td",Q,[s.status=="use"?(u(),d("div",W,[t(z,{color:"success"},{default:l(()=>[r("\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19")]),_:1})])):N("",!0),s.status!="use"?(u(),d("div",X,[t(z,{color:"error"},{default:l(()=>[r("\u0E44\u0E21\u0E48\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19")]),_:1})])):N("",!0)]),e("td",Y,i(a.thaiDateNotime(s.create_date)),1),e("td",Z,[e("td",null,[t(c,{block:"",class:"mt-1",size:"small",color:"primary",onClick:b=>(a.customer=s,a.show=!0)},{default:l(()=>[t(p,{start:"",icon:"tabler-edit"}),r(" \u0E41\u0E01\u0E49\u0E44\u0E02 ")]),_:2},1032,["onClick"]),t(c,{block:"",class:"mt-1",size:"small",color:"success",onClick:b=>(a.customer=s,a.showpacket=!0)},{default:l(()=>[t(p,{start:"",icon:"tabler-heart-dollar"}),r(" \u0E0B\u0E37\u0E49\u0E2D\u0E41\u0E1E\u0E47\u0E04\u0E40\u0E01\u0E08 ")]),_:2},1032,["onClick"])])])]))),256))])]),_:1})]),_:1}),t(P,{modelValue:a.show,"onUpdate:modelValue":o[6]||(o[6]=s=>a.show=s),"max-width":"800"},{default:l(()=>[t(V,{onClick:o[1]||(o[1]=s=>a.show=!1)}),t(k,null,{default:l(()=>[t(D,null,{default:l(()=>[r(" \u0E08\u0E31\u0E14\u0E01\u0E32\u0E23\u0E04\u0E48\u0E32\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23 ")]),_:1}),t(_,null,{default:l(()=>[t(y,null,{default:l(()=>[t(f,{cols:"6",md:"6"},{default:l(()=>[t(w,{type:"text",modelValue:a.customer.mobile,"onUpdate:modelValue":o[2]||(o[2]=s=>a.customer.mobile=s),label:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23"},null,8,["modelValue"])]),_:1}),t(f,{cols:"6",md:"6"},{default:l(()=>[t(w,{type:"text",modelValue:a.customer.name,"onUpdate:modelValue":o[3]||(o[3]=s=>a.customer.name=s),label:"\u0E0A\u0E37\u0E48\u0E2D"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(_,{class:"d-flex justify-end flex-wrap gap-3"},{default:l(()=>[t(c,{variant:"tonal",color:"secondary",onClick:o[4]||(o[4]=s=>a.show=!1)},{default:l(()=>[r(" \u0E1B\u0E34\u0E14 ")]),_:1}),t(c,{color:"primary",onClick:o[5]||(o[5]=s=>x.saveData())},{default:l(()=>[r(" \u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(P,{modelValue:a.showpacket,"onUpdate:modelValue":o[10]||(o[10]=s=>a.showpacket=s),"max-width":"800"},{default:l(()=>[t(V,{onClick:o[7]||(o[7]=s=>a.showpacket=!1)}),t(k,null,{default:l(()=>[t(D,null,{default:l(()=>[r(" \u0E25\u0E39\u0E01\u0E04\u0E49\u0E32\u0E0B\u0E37\u0E49\u0E2D Packet ")]),_:1}),t(_,null,{default:l(()=>[t(y,null,{default:l(()=>[t(f,{cols:"6",md:"6"},{default:l(()=>[t(w,{type:"text",modelValue:a.licen,"onUpdate:modelValue":o[8]||(o[8]=s=>a.licen=s),label:"\u0E1B\u0E49\u0E32\u0E22\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19"},null,8,["modelValue"])]),_:1}),t(S,{"fixed-header":"",class:"text-no-wrap"},{default:l(()=>[$,e("tbody",null,[(u(!0),d(v,null,C(a.packets,s=>(u(),d("tr",null,[e("td",tt,i(s.title),1),e("td",et,i(s.detail),1),e("td",st,i(s.price),1),e("td",lt,i(s.count),1),e("td",ot,i(a.thaiDateNotime(s.created_date)),1),e("td",at,[t(c,{block:"",class:"mt-1",size:"small",color:"success",onClick:b=>x.buyPacket(s)},{default:l(()=>[t(p,{start:"",icon:"tabler-heart-dollar"}),r(" \u0E0B\u0E37\u0E49\u0E2D\u0E41\u0E1E\u0E47\u0E04\u0E40\u0E01\u0E08 ")]),_:2},1032,["onClick"])])]))),256))])]),_:1})]),_:1})]),_:1}),t(_,{class:"d-flex justify-end flex-wrap gap-3"},{default:l(()=>[t(c,{variant:"tonal",color:"secondary",onClick:o[9]||(o[9]=s=>a.showpacket=!1)},{default:l(()=>[r(" \u0E1B\u0E34\u0E14 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const vt=T(A,[["render",nt]]);export{vt as default};
