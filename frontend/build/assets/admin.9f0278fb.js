import{_ as C}from"./DialogCloseBtn.cdc9b10c.js";import{y as D,bp as U,bq as S,bd as x,o as i,c as m,m as o,p as e,w as a,bm as d,A as c,z as n,bl as h,a1 as N,a2 as B,bs as T,F as z,a as j,bh as y,bj as b,br as g,b9 as w,x as V}from"./index.3c95d40c.js";import{f as F}from"./helpers.segment.1007a634.js";import{t as q}from"./thaiDateNotime.28095d2c.js";import{d as A}from"./derlimiter.4329166e.js";import{S as _}from"./sweetalert2.all.e105506d.js";import{V as u}from"./VBtn.de188946.js";import{V as L}from"./VTable.bed9191f.js";import{V as M}from"./VPagination.fd92b8dc.js";import{V as O}from"./VSelect.104ad826.js";import{V as p}from"./VTextField.243e87f6.js";import{V as P}from"./VDialog.a5ae662c.js";import{V as R}from"./VAlert.9630be51.js";import{V as E}from"./VChip.52f74976.js";import"./VList.ee0d9997.js";import"./index.9239a81b.js";import"./VDivider.937dea43.js";import"./forwardRefs.c003b6b8.js";import"./scopeId.ea7e834f.js";import"./easing.36b781ab.js";import"./lazy.acb2b8e6.js";import"./VMenu.a91a1719.js";import"./VSelectionControl.f693fb8c.js";const I={name:"user-profile",computed:{moment(){return U}},data(){return{loading:!0,derlimiter:A,thaiDateNotime:q,pagination:[],page:1,route:S(),show:!1,admin:{id:0,role:"admin",name:"",username:"",password:"",status:!1,code:""},changPass:{id:0,password:"",confirm_password:""},showPassword:!1,admins:[]}},methods:{formatNumber:F,async getData(){this.loading=!0,await x({method:"get",url:"/admins",data:[],params:[]}).then(r=>{this.admins=r.data,this.loading=!1}).catch(r=>{console.log(r)})},async saveDataPassword(){await x({method:"post",url:"/chang-password",data:this.changPass,params:[]}).then(r=>{r.status=="success"&&(_.fire({icon:"success",title:"Success",text:r.message}),this.showPassword=!1,this.getData())}).catch(r=>{console.log(r),this.showPassword=!1,_.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})})},async saveData(){let r={id:this.admin.id,role:this.admin.role,name:this.admin.name,username:this.admin.username,password:this.admin.password,status:this.admin.status,code:this.admin.code};await x({method:"post",url:"/admins/save-admin",data:r,params:[]}).then(t=>{t.status=="success"&&(_.fire({icon:"success",title:"Success",text:t.message}),this.show=!1,this.getData())}).catch(t=>{console.log(t),this.show=!1,_.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})})},async openModal(){this.show=!0,this.service={id:0,role:1,name:"",username:"",password:"",status:!1,code:""}}},mounted(){this.getData()}},G={mode:"out-in"},H=o("h1",null,"\u0E08\u0E31\u0E14\u0E01\u0E32\u0E23\u0E1E\u0E19\u0E31\u0E01\u0E07\u0E32\u0E19",-1),J={class:"v-overlay--absolute text-center w-100 h-100",style:{"background-color":"rgba(255,255,255,.8)","z-index":"9"}},K=o("thead",null,[o("tr",null,[o("th",{style:{"text-align":"start"}},"\u0E22\u0E39\u0E40\u0E0B\u0E2D\u0E23\u0E4C"),o("th",{style:{"text-align":"start"}},"\u0E23\u0E2B\u0E31\u0E2A"),o("th",{style:{"text-align":"start"}},"\u0E0A\u0E37\u0E48\u0E2D - \u0E19\u0E32\u0E21\u0E2A\u0E01\u0E38\u0E25"),o("th",{style:{"text-align":"center"}},"\u0E23\u0E30\u0E14\u0E31\u0E1A\u0E01\u0E32\u0E23\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19"),o("th",{style:{"text-align":"center"}},"\u0E2A\u0E16\u0E32\u0E19\u0E30"),o("th",{style:{"text-align":"center"}},"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E2A\u0E23\u0E49\u0E32\u0E07"),o("th",{style:{"text-align":"center"}},"\u0E41\u0E01\u0E49\u0E44\u0E02")])],-1),Q={style:{"text-align":"start"}},W={style:{"text-align":"start"}},X={style:{"text-align":"start"}},Y={style:{"text-align":"center"}},Z={key:0,style:{color:"orange"}},$={key:1},ee={style:{"text-align":"center"}},te={key:0},se={style:{"text-align":"center"}},le={style:{"text-align":"center"}},ae={class:"d-flex flex-column gap-6 px-4 mt-5"},oe={key:0,style:{padding:"10px"}},ne=o("p",{class:"text-caption mb-2"},[n(" \u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E44\u0E21\u0E48\u0E15\u0E23\u0E07\u0E01\u0E31\u0E19 : "),o("strong",null,"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E23\u0E01\u0E2D\u0E01\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E43\u0E2B\u0E49\u0E15\u0E23\u0E07\u0E01\u0E31\u0E19")],-1);function re(r,t,de,ie,s,f){const v=C;return i(),m("div",null,[o("div",G,[e(h,{class:"mb-3"},{default:a(()=>[e(d,null,{default:a(()=>[H]),_:1}),e(d,{md:"2",class:"text-end"},{default:a(()=>[e(u,{onClick:t[0]||(t[0]=l=>f.openModal())},{default:a(()=>[e(c,{start:"",icon:"tabler-square-rounded-plus-filled"}),n(" \u0E40\u0E1E\u0E34\u0E48\u0E21\u0E1E\u0E19\u0E31\u0E01\u0E07\u0E32\u0E19 ")]),_:1})]),_:1})]),_:1})]),e(y,null,{default:a(()=>[N(o("div",J,[e(T,{indeterminate:"",color:"primary"})],512),[[B,s.loading]]),e(L,{"fixed-header":"",density:"compact",class:"text-no-wrap"},{default:a(()=>[K,o("tbody",null,[(i(!0),m(z,null,j(s.admins,l=>(i(),m("tr",null,[o("td",Q,V(l.username),1),o("td",W,V(l.code),1),o("td",X,V(l.name),1),o("td",Y,[l.role=="admin"?(i(),m("div",Z,[e(c,{start:"",color:"warning",icon:"tabler-star-filled"}),n("\u0E40\u0E08\u0E49\u0E32\u0E02\u0E2D\u0E07")])):w("",!0),l.role!="admin"?(i(),m("div",$,"\u0E1E\u0E19\u0E31\u0E01\u0E07\u0E32\u0E19")):w("",!0)]),o("td",ee,[l.status=="use"?(i(),m("div",te,[e(E,{color:"success"},{default:a(()=>[n("\u0E40\u0E1B\u0E34\u0E14")]),_:1})])):w("",!0)]),o("td",se,V(s.thaiDateNotime(l.create_date)),1),o("td",le,[e(h,null,{default:a(()=>[e(d,{cols:"6",md:"6"},{default:a(()=>[e(u,{size:"small",color:"primary",onClick:k=>(s.show=!0,s.admin=l)},{default:a(()=>[e(c,{start:"",icon:"tabler-edit"}),n(" \u0E41\u0E01\u0E49\u0E44\u0E02 ")]),_:2},1032,["onClick"])]),_:2},1024),e(d,{cols:"6",md:"6"},{default:a(()=>[e(u,{size:"small",color:"primary",onClick:k=>(s.showPassword=!0,s.changPass.id=l.id)},{default:a(()=>[e(c,{start:"",icon:"tabler-edit"}),n(" \u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)])]))),256))])]),_:1}),o("div",ae,[e(M,{modelValue:s.page,"onUpdate:modelValue":t[1]||(t[1]=l=>s.page=l),length:s.pagination.last_page,"total-visible":20,onClick:f.getData},null,8,["modelValue","length","onClick"])])]),_:1}),e(P,{modelValue:s.show,"onUpdate:modelValue":t[10]||(t[10]=l=>s.show=l),"max-width":"800"},{default:a(()=>[e(v,{onClick:t[2]||(t[2]=l=>s.show=!1)}),e(y,null,{default:a(()=>[e(b,null,{default:a(()=>[n(" \u0E08\u0E31\u0E14\u0E01\u0E32\u0E23\u0E1E\u0E19\u0E31\u0E01\u0E07\u0E32\u0E19 ")]),_:1}),e(g,null,{default:a(()=>[e(h,null,{default:a(()=>[e(d,{cols:"12",md:"12"},{default:a(()=>[e(O,{modelValue:s.admin.role,"onUpdate:modelValue":t[3]||(t[3]=l=>s.admin.role=l),items:[{name:"\u0E1C\u0E39\u0E49\u0E08\u0E31\u0E14\u0E01\u0E32\u0E23",value:"admin"},{name:"\u0E1E\u0E19\u0E31\u0E01\u0E07\u0E32\u0E19",value:"employee"}],"item-title":"name","item-value":"value",label:"\u0E23\u0E30\u0E14\u0E31\u0E1A\u0E01\u0E32\u0E23\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19","persistent-hint":""},null,8,["modelValue"])]),_:1}),e(d,{cols:"6",md:"6"},{default:a(()=>[e(p,{type:"text",modelValue:s.admin.code,"onUpdate:modelValue":t[4]||(t[4]=l=>s.admin.code=l),label:"\u0E23\u0E2B\u0E31\u0E2A\u0E1E\u0E19\u0E31\u0E01\u0E07\u0E32\u0E19"},null,8,["modelValue"])]),_:1}),e(d,{cols:"6",md:"6"},{default:a(()=>[e(p,{type:"text",modelValue:s.admin.name,"onUpdate:modelValue":t[5]||(t[5]=l=>s.admin.name=l),label:"\u0E0A\u0E37\u0E48\u0E2D - \u0E19\u0E27\u0E21\u0E2A\u0E01\u0E38\u0E25"},null,8,["modelValue"])]),_:1}),e(d,{cols:"6",md:"6"},{default:a(()=>[e(p,{type:"text",modelValue:s.admin.username,"onUpdate:modelValue":t[6]||(t[6]=l=>s.admin.username=l),label:"Username"},null,8,["modelValue"])]),_:1}),e(d,{cols:"6",md:"6"},{default:a(()=>[e(p,{type:"password",modelValue:s.admin.password,"onUpdate:modelValue":t[7]||(t[7]=l=>s.admin.password=l),label:"Password"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(g,{class:"d-flex justify-end flex-wrap gap-3"},{default:a(()=>[e(u,{variant:"tonal",color:"secondary",onClick:t[8]||(t[8]=l=>s.show=!1)},{default:a(()=>[n(" \u0E1B\u0E34\u0E14 ")]),_:1}),e(u,{color:"primary",onClick:t[9]||(t[9]=l=>f.saveData())},{default:a(()=>[n(" \u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(P,{modelValue:s.showPassword,"onUpdate:modelValue":t[16]||(t[16]=l=>s.showPassword=l),"max-width":"800"},{default:a(()=>[e(v,{onClick:t[11]||(t[11]=l=>s.showPassword=!1)}),e(y,null,{default:a(()=>[e(b,null,{default:a(()=>[n(" \u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19 ")]),_:1}),e(g,null,{default:a(()=>[e(h,null,{default:a(()=>[e(d,{cols:"6",md:"6"},{default:a(()=>[e(p,{type:"text",modelValue:s.changPass.password,"onUpdate:modelValue":t[12]||(t[12]=l=>s.changPass.password=l),label:"\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19"},null,8,["modelValue"])]),_:1}),e(d,{cols:"6",md:"6"},{default:a(()=>[e(p,{type:"text",modelValue:s.changPass.confirm_password,"onUpdate:modelValue":t[13]||(t[13]=l=>s.changPass.confirm_password=l),label:"\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19"},null,8,["modelValue"])]),_:1})]),_:1}),s.changPass.password!=s.changPass.confirm_password?(i(),m("div",oe,[e(R,{color:"error",variant:"tonal"},{default:a(()=>[ne]),_:1})])):w("",!0)]),_:1}),e(g,{class:"d-flex justify-end flex-wrap gap-3"},{default:a(()=>[e(u,{variant:"tonal",color:"secondary",onClick:t[14]||(t[14]=l=>s.showPassword=!1)},{default:a(()=>[n(" \u0E1B\u0E34\u0E14 ")]),_:1}),e(u,{disabled:s.changPass.password!=s.changPass.confirm_password,color:"primary",onClick:t[15]||(t[15]=l=>f.saveDataPassword())},{default:a(()=>[n(" \u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const ze=D(I,[["render",re]]);export{ze as default};
