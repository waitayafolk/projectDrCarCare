import{_ as D}from"./DialogCloseBtn.e584b7a2.js";import{s as x}from"./axios.4960f1a7.js";import{y as U,bn as S,bo as N,o as i,c as m,m as o,p as e,w as a,A as g,z as n,a1 as B,a2 as T,bq as z,F,a as j,bg as y,bi as b,bp as h,b9 as f,x as w}from"./index.7138b669.js";import{f as q}from"./helpers.segment.1007a634.js";import{d as A,t as L}from"./derlimiter.d68341e6.js";import{S as V}from"./sweetalert2.all.e105506d.js";import{a as d,V as _}from"./VRow.71f27439.js";import{V as u}from"./VBtn.a6b3b781.js";import{V as M}from"./VTable.d94d2277.js";import{V as O}from"./VPagination.f6804d4c.js";import{a as R}from"./VSelect.53fd42df.js";import{V as p}from"./VTextField.e3a82c45.js";import{V as E}from"./VSwitch.05168bf6.js";import{V as P}from"./VDialog.b6576d0e.js";import{V as I}from"./VAlert.aff3ce59.js";import{V as k}from"./VChip.5acfabce.js";import"./axios.364130a5.js";import"./VList.a1d44376.js";import"./index.0ab14008.js";import"./VDivider.4e8da04b.js";import"./forwardRefs.c003b6b8.js";import"./scopeId.8cf76934.js";import"./easing.36b781ab.js";import"./lazy.858355b6.js";import"./VMenu.7f2b4ed7.js";import"./VSelectionControl.234f4b9e.js";const G={name:"user-profile",computed:{moment(){return S}},data(){return{loading:!0,derlimiter:A,thaiDateNotime:L,pagination:[],page:1,route:N(),show:!1,admin:{id:0,role:1,name:"",username:"",password:"",status:!1,code:""},changPass:{id:0,password:"",confirm_password:""},showPassword:!1,admins:[]}},methods:{formatNumber:q,async getData(){this.loading=!0,await x({method:"get",url:"/admins",data:[],params:[]}).then(r=>{this.admins=r.data,this.loading=!1}).catch(r=>{console.log(r)})},async saveDataPassword(){await x({method:"post",url:"/chang-password",data:this.changPass,params:[]}).then(r=>{r.status=="success"&&(V.fire({icon:"success",title:"Success",text:r.message}),this.showPassword=!1,this.getData())}).catch(r=>{console.log(r),this.showPassword=!1,V.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})})},async saveData(){let r={id:this.admin.id,role:this.admin.role,name:this.admin.name,username:this.admin.username,password:this.admin.password,status:this.admin.status,code:this.admin.code};await x({method:"post",url:"/admins/save-admin",data:r,params:[]}).then(t=>{t.status=="success"&&(V.fire({icon:"success",title:"Success",text:t.message}),this.show=!1,this.getData())}).catch(t=>{console.log(t),this.show=!1,V.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})})},async openModal(){this.show=!0,this.service={id:0,role:1,name:"",username:"",password:"",status:!1,code:""}}},mounted(){this.getData()}},H={mode:"out-in"},J=o("h1",null,"\u0E08\u0E31\u0E14\u0E01\u0E32\u0E23\u0E1E\u0E19\u0E31\u0E01\u0E07\u0E32\u0E19",-1),K={class:"v-overlay--absolute text-center w-100 h-100",style:{"background-color":"rgba(255,255,255,.8)","z-index":"9"}},Q=o("thead",null,[o("tr",null,[o("th",{style:{"text-align":"start"}},"\u0E22\u0E39\u0E40\u0E0B\u0E2D\u0E23\u0E4C"),o("th",{style:{"text-align":"start"}},"\u0E23\u0E2B\u0E31\u0E2A"),o("th",{style:{"text-align":"start"}},"\u0E0A\u0E37\u0E48\u0E2D - \u0E19\u0E32\u0E21\u0E2A\u0E01\u0E38\u0E25"),o("th",{style:{"text-align":"center"}},"\u0E23\u0E30\u0E14\u0E31\u0E1A\u0E01\u0E32\u0E23\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19"),o("th",{style:{"text-align":"center"}},"\u0E2A\u0E16\u0E32\u0E19\u0E30"),o("th",{style:{"text-align":"center"}},"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E2A\u0E23\u0E49\u0E32\u0E07"),o("th",{style:{"text-align":"center"}},"\u0E41\u0E01\u0E49\u0E44\u0E02")])],-1),W={style:{"text-align":"start"}},X={style:{"text-align":"start"}},Y={style:{"text-align":"start"}},Z={style:{"text-align":"center"}},$={key:0,style:{color:"orange"}},ee={key:1},te={style:{"text-align":"center"}},se={key:0},le={key:1},ae={style:{"text-align":"center"}},oe={style:{"text-align":"center"}},ne={class:"d-flex flex-column gap-6 px-4 mt-5"},re={key:0,style:{padding:"10px"}},de=o("p",{class:"text-caption mb-2"},[n(" \u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E44\u0E21\u0E48\u0E15\u0E23\u0E07\u0E01\u0E31\u0E19 : "),o("strong",null,"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E23\u0E01\u0E2D\u0E01\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E43\u0E2B\u0E49\u0E15\u0E23\u0E07\u0E01\u0E31\u0E19")],-1);function ie(r,t,me,ue,l,c){const v=D;return i(),m("div",null,[o("div",H,[e(_,{class:"mb-3"},{default:a(()=>[e(d,null,{default:a(()=>[J]),_:1}),e(d,{md:"2",class:"text-end"},{default:a(()=>[e(u,{onClick:t[0]||(t[0]=s=>c.openModal())},{default:a(()=>[e(g,{start:"",icon:"tabler-square-rounded-plus-filled"}),n(" \u0E40\u0E1E\u0E34\u0E48\u0E21\u0E1E\u0E19\u0E31\u0E01\u0E07\u0E32\u0E19 ")]),_:1})]),_:1})]),_:1})]),e(y,null,{default:a(()=>[B(o("div",K,[e(z,{indeterminate:"",color:"primary"})],512),[[T,l.loading]]),e(M,{"fixed-header":"",density:"compact",class:"text-no-wrap"},{default:a(()=>[Q,o("tbody",null,[(i(!0),m(F,null,j(l.admins,s=>(i(),m("tr",null,[o("td",W,w(s.username),1),o("td",X,w(s.code),1),o("td",Y,w(s.name),1),o("td",Z,[s.role==1?(i(),m("div",$,[e(g,{start:"",color:"warning",icon:"tabler-star-filled"}),n("\u0E40\u0E08\u0E49\u0E32\u0E02\u0E2D\u0E07")])):f("",!0),s.role==2?(i(),m("div",ee,"\u0E1E\u0E19\u0E31\u0E01\u0E07\u0E32\u0E19")):f("",!0)]),o("td",te,[s.status==!0?(i(),m("div",se,[e(k,{color:"success"},{default:a(()=>[n("\u0E40\u0E1B\u0E34\u0E14")]),_:1})])):f("",!0),s.status==!1?(i(),m("div",le,[e(k,{color:"error"},{default:a(()=>[n("\u0E23\u0E30\u0E07\u0E31\u0E1A\u0E01\u0E32\u0E23\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19")]),_:1})])):f("",!0)]),o("td",ae,w(l.thaiDateNotime(s.create_date)),1),o("td",oe,[e(_,null,{default:a(()=>[e(d,{cols:"6",md:"6"},{default:a(()=>[e(u,{size:"small",color:"primary",onClick:C=>(l.show=!0,l.admin=s)},{default:a(()=>[e(g,{start:"",icon:"tabler-edit"}),n(" \u0E41\u0E01\u0E49\u0E44\u0E02 ")]),_:2},1032,["onClick"])]),_:2},1024),e(d,{cols:"6",md:"6"},{default:a(()=>[e(u,{size:"small",color:"primary",onClick:C=>(l.showPassword=!0,l.changPass.id=s.id)},{default:a(()=>[e(g,{start:"",icon:"tabler-edit"}),n(" \u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)])]))),256))])]),_:1}),o("div",ne,[e(O,{modelValue:l.page,"onUpdate:modelValue":t[1]||(t[1]=s=>l.page=s),length:l.pagination.last_page,"total-visible":20,onClick:c.getData},null,8,["modelValue","length","onClick"])])]),_:1}),e(P,{modelValue:l.show,"onUpdate:modelValue":t[11]||(t[11]=s=>l.show=s),"max-width":"800"},{default:a(()=>[e(v,{onClick:t[2]||(t[2]=s=>l.show=!1)}),e(y,null,{default:a(()=>[e(b,null,{default:a(()=>[n(" \u0E08\u0E31\u0E14\u0E01\u0E32\u0E23\u0E1E\u0E19\u0E31\u0E01\u0E07\u0E32\u0E19 ")]),_:1}),e(h,null,{default:a(()=>[e(_,null,{default:a(()=>[e(d,{cols:"12",md:"12"},{default:a(()=>[e(R,{modelValue:l.admin.role,"onUpdate:modelValue":t[3]||(t[3]=s=>l.admin.role=s),items:[{name:"\u0E1C\u0E39\u0E49\u0E08\u0E31\u0E14\u0E01\u0E32\u0E23",value:1},{name:"\u0E1E\u0E19\u0E31\u0E01\u0E07\u0E32\u0E19",value:2}],"item-title":"name","item-value":"value",label:"\u0E23\u0E30\u0E14\u0E31\u0E1A\u0E01\u0E32\u0E23\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19","persistent-hint":""},null,8,["modelValue"])]),_:1}),e(d,{cols:"6",md:"6"},{default:a(()=>[e(p,{type:"text",modelValue:l.admin.code,"onUpdate:modelValue":t[4]||(t[4]=s=>l.admin.code=s),label:"\u0E23\u0E2B\u0E31\u0E2A\u0E1E\u0E19\u0E31\u0E01\u0E07\u0E32\u0E19"},null,8,["modelValue"])]),_:1}),e(d,{cols:"6",md:"6"},{default:a(()=>[e(p,{type:"text",modelValue:l.admin.name,"onUpdate:modelValue":t[5]||(t[5]=s=>l.admin.name=s),label:"\u0E0A\u0E37\u0E48\u0E2D - \u0E19\u0E27\u0E21\u0E2A\u0E01\u0E38\u0E25"},null,8,["modelValue"])]),_:1}),e(d,{cols:"6",md:"6"},{default:a(()=>[e(p,{type:"text",modelValue:l.admin.username,"onUpdate:modelValue":t[6]||(t[6]=s=>l.admin.username=s),label:"Username"},null,8,["modelValue"])]),_:1}),e(d,{cols:"6",md:"6"},{default:a(()=>[e(p,{disabled:r.id!=0,type:"password",modelValue:l.admin.password,"onUpdate:modelValue":t[7]||(t[7]=s=>l.admin.password=s),label:"Password"},null,8,["disabled","modelValue"])]),_:1}),e(d,{cols:"12",md:"12"},{default:a(()=>[e(E,{modelValue:l.admin.status,"onUpdate:modelValue":t[8]||(t[8]=s=>l.admin.status=s),label:"\u0E2A\u0E16\u0E32\u0E19\u0E30"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(h,{class:"d-flex justify-end flex-wrap gap-3"},{default:a(()=>[e(u,{variant:"tonal",color:"secondary",onClick:t[9]||(t[9]=s=>l.show=!1)},{default:a(()=>[n(" \u0E1B\u0E34\u0E14 ")]),_:1}),e(u,{color:"primary",onClick:t[10]||(t[10]=s=>c.saveData())},{default:a(()=>[n(" \u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(P,{modelValue:l.showPassword,"onUpdate:modelValue":t[17]||(t[17]=s=>l.showPassword=s),"max-width":"800"},{default:a(()=>[e(v,{onClick:t[12]||(t[12]=s=>l.showPassword=!1)}),e(y,null,{default:a(()=>[e(b,null,{default:a(()=>[n(" \u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19 ")]),_:1}),e(h,null,{default:a(()=>[e(_,null,{default:a(()=>[e(d,{cols:"6",md:"6"},{default:a(()=>[e(p,{type:"text",modelValue:l.changPass.password,"onUpdate:modelValue":t[13]||(t[13]=s=>l.changPass.password=s),label:"\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19"},null,8,["modelValue"])]),_:1}),e(d,{cols:"6",md:"6"},{default:a(()=>[e(p,{type:"text",modelValue:l.changPass.confirm_password,"onUpdate:modelValue":t[14]||(t[14]=s=>l.changPass.confirm_password=s),label:"\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19"},null,8,["modelValue"])]),_:1})]),_:1}),l.changPass.password!=l.changPass.confirm_password?(i(),m("div",re,[e(I,{color:"error",variant:"tonal"},{default:a(()=>[de]),_:1})])):f("",!0)]),_:1}),e(h,{class:"d-flex justify-end flex-wrap gap-3"},{default:a(()=>[e(u,{variant:"tonal",color:"secondary",onClick:t[15]||(t[15]=s=>l.showPassword=!1)},{default:a(()=>[n(" \u0E1B\u0E34\u0E14 ")]),_:1}),e(u,{disabled:l.changPass.password!=l.changPass.confirm_password,color:"primary",onClick:t[16]||(t[16]=s=>c.saveDataPassword())},{default:a(()=>[n(" \u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const Le=U(G,[["render",ie]]);export{Le as default};
