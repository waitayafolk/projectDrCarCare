import{_ as C}from"./DialogCloseBtn.e2c66d5f.js";import{s as x}from"./axios.b493e35e.js";import{y as D,bn as U,bo as S,o as d,c as m,m as o,p as e,w as a,A as c,z as n,a1 as N,a2 as B,bq as T,F as z,a as F,bg as y,bi as b,bp as g,b9 as h,x as w}from"./index.0facccbe.js";import{f as j}from"./helpers.segment.1007a634.js";import{t as q}from"./thaiDateNotime.4f45951f.js";import{d as A}from"./derlimiter.4329166e.js";import{S as V}from"./sweetalert2.all.e105506d.js";import{a as i,V as _}from"./VRow.6aae301f.js";import{V as u}from"./VBtn.3104bac6.js";import{V as L}from"./VTable.3f072893.js";import{V as M}from"./VPagination.5249d1d4.js";import{a as O}from"./VSelect.dd17c57e.js";import{V as p}from"./VTextField.323844b9.js";import{V as P}from"./VDialog.aeb52d33.js";import{V as R}from"./VAlert.b249c6e6.js";import{V as E}from"./VChip.1d761825.js";import"./axios.364130a5.js";import"./VList.3bef9b34.js";import"./index.5fb275e0.js";import"./VDivider.08438beb.js";import"./forwardRefs.c003b6b8.js";import"./scopeId.c9d7b785.js";import"./easing.36b781ab.js";import"./lazy.56be6ec5.js";import"./VMenu.f85be3cf.js";import"./VSelectionControl.dacc40f0.js";const I={name:"user-profile",computed:{moment(){return U}},data(){return{loading:!0,derlimiter:A,thaiDateNotime:q,pagination:[],page:1,route:S(),show:!1,admin:{id:0,role:"admin",name:"",username:"",password:"",status:!1,code:""},changPass:{id:0,password:"",confirm_password:""},showPassword:!1,admins:[]}},methods:{formatNumber:j,async getData(){this.loading=!0,await x({method:"get",url:"/admins",data:[],params:[]}).then(r=>{this.admins=r.data,this.loading=!1}).catch(r=>{console.log(r)})},async saveDataPassword(){await x({method:"post",url:"/chang-password",data:this.changPass,params:[]}).then(r=>{r.status=="success"&&(V.fire({icon:"success",title:"Success",text:r.message}),this.showPassword=!1,this.getData())}).catch(r=>{console.log(r),this.showPassword=!1,V.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})})},async saveData(){let r={id:this.admin.id,role:this.admin.role,name:this.admin.name,username:this.admin.username,password:this.admin.password,status:this.admin.status,code:this.admin.code};await x({method:"post",url:"/admins/save-admin",data:r,params:[]}).then(t=>{t.status=="success"&&(V.fire({icon:"success",title:"Success",text:t.message}),this.show=!1,this.getData())}).catch(t=>{console.log(t),this.show=!1,V.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})})},async openModal(){this.show=!0,this.service={id:0,role:1,name:"",username:"",password:"",status:!1,code:""}}},mounted(){this.getData()}},G={mode:"out-in"},H=o("h1",null,"\u0E08\u0E31\u0E14\u0E01\u0E32\u0E23\u0E1E\u0E19\u0E31\u0E01\u0E07\u0E32\u0E19",-1),J={class:"v-overlay--absolute text-center w-100 h-100",style:{"background-color":"rgba(255,255,255,.8)","z-index":"9"}},K=o("thead",null,[o("tr",null,[o("th",{style:{"text-align":"start"}},"\u0E22\u0E39\u0E40\u0E0B\u0E2D\u0E23\u0E4C"),o("th",{style:{"text-align":"start"}},"\u0E23\u0E2B\u0E31\u0E2A"),o("th",{style:{"text-align":"start"}},"\u0E0A\u0E37\u0E48\u0E2D - \u0E19\u0E32\u0E21\u0E2A\u0E01\u0E38\u0E25"),o("th",{style:{"text-align":"center"}},"\u0E23\u0E30\u0E14\u0E31\u0E1A\u0E01\u0E32\u0E23\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19"),o("th",{style:{"text-align":"center"}},"\u0E2A\u0E16\u0E32\u0E19\u0E30"),o("th",{style:{"text-align":"center"}},"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E2A\u0E23\u0E49\u0E32\u0E07"),o("th",{style:{"text-align":"center"}},"\u0E41\u0E01\u0E49\u0E44\u0E02")])],-1),Q={style:{"text-align":"start"}},W={style:{"text-align":"start"}},X={style:{"text-align":"start"}},Y={style:{"text-align":"center"}},Z={key:0,style:{color:"orange"}},$={key:1},ee={style:{"text-align":"center"}},te={key:0},se={style:{"text-align":"center"}},le={style:{"text-align":"center"}},ae={class:"d-flex flex-column gap-6 px-4 mt-5"},oe={key:0,style:{padding:"10px"}},ne=o("p",{class:"text-caption mb-2"},[n(" \u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E44\u0E21\u0E48\u0E15\u0E23\u0E07\u0E01\u0E31\u0E19 : "),o("strong",null,"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E23\u0E01\u0E2D\u0E01\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E43\u0E2B\u0E49\u0E15\u0E23\u0E07\u0E01\u0E31\u0E19")],-1);function re(r,t,ie,de,s,f){const v=C;return d(),m("div",null,[o("div",G,[e(_,{class:"mb-3"},{default:a(()=>[e(i,null,{default:a(()=>[H]),_:1}),e(i,{md:"2",class:"text-end"},{default:a(()=>[e(u,{onClick:t[0]||(t[0]=l=>f.openModal())},{default:a(()=>[e(c,{start:"",icon:"tabler-square-rounded-plus-filled"}),n(" \u0E40\u0E1E\u0E34\u0E48\u0E21\u0E1E\u0E19\u0E31\u0E01\u0E07\u0E32\u0E19 ")]),_:1})]),_:1})]),_:1})]),e(y,null,{default:a(()=>[N(o("div",J,[e(T,{indeterminate:"",color:"primary"})],512),[[B,s.loading]]),e(L,{"fixed-header":"",density:"compact",class:"text-no-wrap"},{default:a(()=>[K,o("tbody",null,[(d(!0),m(z,null,F(s.admins,l=>(d(),m("tr",null,[o("td",Q,w(l.username),1),o("td",W,w(l.code),1),o("td",X,w(l.name),1),o("td",Y,[l.role=="admin"?(d(),m("div",Z,[e(c,{start:"",color:"warning",icon:"tabler-star-filled"}),n("\u0E40\u0E08\u0E49\u0E32\u0E02\u0E2D\u0E07")])):h("",!0),l.role!="admin"?(d(),m("div",$,"\u0E1E\u0E19\u0E31\u0E01\u0E07\u0E32\u0E19")):h("",!0)]),o("td",ee,[l.status=="use"?(d(),m("div",te,[e(E,{color:"success"},{default:a(()=>[n("\u0E40\u0E1B\u0E34\u0E14")]),_:1})])):h("",!0)]),o("td",se,w(s.thaiDateNotime(l.create_date)),1),o("td",le,[e(_,null,{default:a(()=>[e(i,{cols:"6",md:"6"},{default:a(()=>[e(u,{size:"small",color:"primary",onClick:k=>(s.show=!0,s.admin=l)},{default:a(()=>[e(c,{start:"",icon:"tabler-edit"}),n(" \u0E41\u0E01\u0E49\u0E44\u0E02 ")]),_:2},1032,["onClick"])]),_:2},1024),e(i,{cols:"6",md:"6"},{default:a(()=>[e(u,{size:"small",color:"primary",onClick:k=>(s.showPassword=!0,s.changPass.id=l.id)},{default:a(()=>[e(c,{start:"",icon:"tabler-edit"}),n(" \u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)])]))),256))])]),_:1}),o("div",ae,[e(M,{modelValue:s.page,"onUpdate:modelValue":t[1]||(t[1]=l=>s.page=l),length:s.pagination.last_page,"total-visible":20,onClick:f.getData},null,8,["modelValue","length","onClick"])])]),_:1}),e(P,{modelValue:s.show,"onUpdate:modelValue":t[10]||(t[10]=l=>s.show=l),"max-width":"800"},{default:a(()=>[e(v,{onClick:t[2]||(t[2]=l=>s.show=!1)}),e(y,null,{default:a(()=>[e(b,null,{default:a(()=>[n(" \u0E08\u0E31\u0E14\u0E01\u0E32\u0E23\u0E1E\u0E19\u0E31\u0E01\u0E07\u0E32\u0E19 ")]),_:1}),e(g,null,{default:a(()=>[e(_,null,{default:a(()=>[e(i,{cols:"12",md:"12"},{default:a(()=>[e(O,{modelValue:s.admin.role,"onUpdate:modelValue":t[3]||(t[3]=l=>s.admin.role=l),items:[{name:"\u0E1C\u0E39\u0E49\u0E08\u0E31\u0E14\u0E01\u0E32\u0E23",value:"admin"},{name:"\u0E1E\u0E19\u0E31\u0E01\u0E07\u0E32\u0E19",value:"employee"}],"item-title":"name","item-value":"value",label:"\u0E23\u0E30\u0E14\u0E31\u0E1A\u0E01\u0E32\u0E23\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19","persistent-hint":""},null,8,["modelValue"])]),_:1}),e(i,{cols:"6",md:"6"},{default:a(()=>[e(p,{type:"text",modelValue:s.admin.code,"onUpdate:modelValue":t[4]||(t[4]=l=>s.admin.code=l),label:"\u0E23\u0E2B\u0E31\u0E2A\u0E1E\u0E19\u0E31\u0E01\u0E07\u0E32\u0E19"},null,8,["modelValue"])]),_:1}),e(i,{cols:"6",md:"6"},{default:a(()=>[e(p,{type:"text",modelValue:s.admin.name,"onUpdate:modelValue":t[5]||(t[5]=l=>s.admin.name=l),label:"\u0E0A\u0E37\u0E48\u0E2D - \u0E19\u0E27\u0E21\u0E2A\u0E01\u0E38\u0E25"},null,8,["modelValue"])]),_:1}),e(i,{cols:"6",md:"6"},{default:a(()=>[e(p,{type:"text",modelValue:s.admin.username,"onUpdate:modelValue":t[6]||(t[6]=l=>s.admin.username=l),label:"Username"},null,8,["modelValue"])]),_:1}),e(i,{cols:"6",md:"6"},{default:a(()=>[e(p,{type:"password",modelValue:s.admin.password,"onUpdate:modelValue":t[7]||(t[7]=l=>s.admin.password=l),label:"Password"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(g,{class:"d-flex justify-end flex-wrap gap-3"},{default:a(()=>[e(u,{variant:"tonal",color:"secondary",onClick:t[8]||(t[8]=l=>s.show=!1)},{default:a(()=>[n(" \u0E1B\u0E34\u0E14 ")]),_:1}),e(u,{color:"primary",onClick:t[9]||(t[9]=l=>f.saveData())},{default:a(()=>[n(" \u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(P,{modelValue:s.showPassword,"onUpdate:modelValue":t[16]||(t[16]=l=>s.showPassword=l),"max-width":"800"},{default:a(()=>[e(v,{onClick:t[11]||(t[11]=l=>s.showPassword=!1)}),e(y,null,{default:a(()=>[e(b,null,{default:a(()=>[n(" \u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19 ")]),_:1}),e(g,null,{default:a(()=>[e(_,null,{default:a(()=>[e(i,{cols:"6",md:"6"},{default:a(()=>[e(p,{type:"text",modelValue:s.changPass.password,"onUpdate:modelValue":t[12]||(t[12]=l=>s.changPass.password=l),label:"\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19"},null,8,["modelValue"])]),_:1}),e(i,{cols:"6",md:"6"},{default:a(()=>[e(p,{type:"text",modelValue:s.changPass.confirm_password,"onUpdate:modelValue":t[13]||(t[13]=l=>s.changPass.confirm_password=l),label:"\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19"},null,8,["modelValue"])]),_:1})]),_:1}),s.changPass.password!=s.changPass.confirm_password?(d(),m("div",oe,[e(R,{color:"error",variant:"tonal"},{default:a(()=>[ne]),_:1})])):h("",!0)]),_:1}),e(g,{class:"d-flex justify-end flex-wrap gap-3"},{default:a(()=>[e(u,{variant:"tonal",color:"secondary",onClick:t[14]||(t[14]=l=>s.showPassword=!1)},{default:a(()=>[n(" \u0E1B\u0E34\u0E14 ")]),_:1}),e(u,{disabled:s.changPass.password!=s.changPass.confirm_password,color:"primary",onClick:t[15]||(t[15]=l=>f.saveDataPassword())},{default:a(()=>[n(" \u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const qe=D(I,[["render",re]]);export{qe as default};
