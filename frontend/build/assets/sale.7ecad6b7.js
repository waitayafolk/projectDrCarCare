import{_ as T}from"./DialogCloseBtn.e2c66d5f.js";import{s as h}from"./axios.b493e35e.js";import{S as g}from"./sweetalert2.all.e105506d.js";import{t as A}from"./thaiDateNotime.4f45951f.js";import{y as j,o as r,c,p as e,w as s,bp as x,z as n,A as F,m as l,F as v,a as V,bg as b,bi as D,x as d,b9 as B}from"./index.0facccbe.js";import{V as w,a as u}from"./VRow.6aae301f.js";import{V as _}from"./VBtn.3104bac6.js";import{V as C}from"./VTable.3f072893.js";import{V as S}from"./VDialog.aeb52d33.js";import{a as U}from"./VSelect.dd17c57e.js";import{V as N}from"./VChip.1d761825.js";import{V as z}from"./VTextField.323844b9.js";import"./axios.364130a5.js";import"./scopeId.c9d7b785.js";import"./easing.36b781ab.js";import"./lazy.56be6ec5.js";import"./forwardRefs.c003b6b8.js";import"./VList.3bef9b34.js";import"./index.5fb275e0.js";import"./VDivider.08438beb.js";import"./VMenu.f85be3cf.js";import"./VSelectionControl.dacc40f0.js";const I={components:{},data(){return{thaiDateNotime:A,tital:"All the best for your new project.",customers:[],service_group:[],service:[],show:!1,detail:!1,billDetail:[],data:{customer_id:null,service_group_id:null,service:[]},bills:[]}},mounted(){this.getBill(),this.getDataCuctomer(),this.getDataServiceGroup()},methods:{async openModal(){this.data.customer_id=null,this.data.service_group_id=null,this.data.service=[],this.show=!0},async getBill(){await h({method:"get",url:"/endbill/bill",data:[],params:[]}).then(a=>{this.bills=a.data}).catch(a=>{console.log(a)})},async getDataCuctomer(){await h({method:"get",url:"/customers",data:[],params:[]}).then(a=>{this.customers=a.data}).catch(a=>{console.log(a)})},async getDataServiceGroup(){await h({method:"get",url:"/services/group",data:[],params:[]}).then(a=>{this.service_group=a.data}).catch(a=>{console.log(a)})},async getDataService(){await h({method:"get",url:`/services/service_id/${this.data.service_group_id}`,data:[],params:[]}).then(a=>{this.service=a.data}).catch(a=>{console.log(a)})},async choose(a){this.data.service.findIndex(f=>f.id===a.id)==-1&&this.data.service.push({id:a.id,price:a.price,discount:0,name:a.title})},async deleteArray(a){let i=this.data.service.findIndex(f=>f.id===a.id);i>-1&&this.data.service.splice(i,1)},async saveDate(){if(this.data.customer_id==null||this.data.service_group_id==null||this.data.service.length==0)return this.show=!1,g.fire({icon:"error",title:"\u0E23\u0E31\u0E1A\u0E23\u0E16\u0E44\u0E21\u0E48\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",text:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E43\u0E2B\u0E49\u0E04\u0E23\u0E1A !"});await h({method:"post",url:"/endbill",data:this.data,params:[]}).then(a=>{a.status=="success"?(g.fire({icon:"success",title:"\u0E23\u0E31\u0E1A\u0E23\u0E16\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",text:"\u0E23\u0E31\u0E1A\u0E23\u0E16\u0E23\u0E2D\u0E25\u0E49\u0E32\u0E07\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08\u0E41\u0E25\u0E49\u0E27 !"}),this.show=!1,this.getBill()):(g.fire({icon:"error",title:"\u0E23\u0E31\u0E1A\u0E23\u0E16\u0E44\u0E21\u0E48\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",text:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E25\u0E2D\u0E07\u0E43\u0E2B\u0E21\u0E48\u0E2D\u0E35\u0E01\u0E04\u0E23\u0E31\u0E49\u0E07 !"}),this.show=!1)}).catch(a=>{console.log(a)})},async updatePercen(a,i){await h({method:"post",url:"/endbill/update",data:{percen:a,bill_id:i},params:[]}).then(y=>{y.status=="success"?(g.fire({icon:"success",title:"\u0E2D\u0E31\u0E1E\u0E40\u0E14\u0E17\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",text:"\u0E2D\u0E31\u0E1E\u0E40\u0E14\u0E17\u0E2A\u0E16\u0E32\u0E19\u0E30\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08 !"}),this.show=!1,this.getBill()):(g.fire({icon:"error",title:"\u0E2D\u0E31\u0E1E\u0E40\u0E14\u0E17\u0E44\u0E21\u0E48\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",text:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E25\u0E2D\u0E07\u0E43\u0E2B\u0E21\u0E48\u0E2D\u0E35\u0E01\u0E04\u0E23\u0E31\u0E49\u0E07 !"}),this.show=!1)}).catch(y=>{console.log(y)})},async openBill(a){}}},P=l("thead",null,[l("tr",null,[l("th",{style:{"text-align":"start"}},"\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08"),l("th",{style:{"text-align":"start"}},"\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17"),l("th",{style:{"text-align":"start"}},"\u0E25\u0E39\u0E01\u0E04\u0E49\u0E32"),l("th",{style:{"text-align":"start"}},"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E25\u0E39\u0E01\u0E04\u0E49\u0E32"),l("th",{style:{"text-align":"start"}},"\u0E41\u0E2D\u0E14\u0E21\u0E34\u0E19\u0E1C\u0E39\u0E49\u0E23\u0E31\u0E1A\u0E1C\u0E34\u0E14\u0E0A\u0E2D\u0E1A"),l("th",{style:{"text-align":"end"}},"\u0E04\u0E48\u0E32\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23"),l("th",{style:{"text-align":"end"}},"\u0E2A\u0E48\u0E27\u0E19\u0E25\u0E14"),l("th",{style:{"text-align":"end"}},"\u0E23\u0E27\u0E21"),l("th",{style:{"text-align":"center"}},"\u0E2A\u0E16\u0E32\u0E19\u0E30"),l("th",{style:{"text-align":"center"}},"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E23\u0E31\u0E1A\u0E23\u0E16"),l("th",{style:{"text-align":"center"}},"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23")])],-1),G={style:{"text-align":"start"}},M={style:{"text-align":"start"}},E={style:{"text-align":"start"}},L={style:{"text-align":"start"}},R={style:{"text-align":"start"}},q={style:{"text-align":"end"}},H={style:{"text-align":"end"}},J={style:{"text-align":"end"}},K={style:{"text-align":"center"}},O={key:0},Q={key:1},W={style:{"text-align":"center"}},X={style:{"text-align":"center"}},Y=l("thead",null,[l("tr",null,[l("th",{style:{"text-align":"start"}},"id"),l("th",{style:{"text-align":"start"}},"\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23"),l("th",{style:{"text-align":"end"}},"\u0E04\u0E48\u0E32\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23"),l("th",{style:{"text-align":"center"}})])],-1),Z={style:{"text-align":"start"}},$={style:{"text-align":"start"}},tt={style:{"text-align":"end"}},et={style:{"text-align":"center"}},lt=l("thead",null,[l("tr",null,[l("th",{style:{"text-align":"start"}},"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23"),l("th",{style:{"text-align":"end"}},"\u0E23\u0E32\u0E04\u0E32"),l("th",{style:{"text-align":"end"}},"\u0E2A\u0E48\u0E27\u0E19\u0E25\u0E14"),l("th",{style:{"text-align":"end"}},"\u0E23\u0E27\u0E21")])],-1),st={style:{"text-align":"start"}},at={style:{"text-align":"end"}},it={style:{"text-align":"end"}},ot={style:{"text-align":"end"}};function nt(a,i,f,y,o,m){const k=T;return r(),c("div",null,[e(b,{class:"mb-6",title:"\u0E23\u0E31\u0E1A\u0E23\u0E16"},{default:s(()=>[e(x,null,{default:s(()=>[e(w,null,{default:s(()=>[e(u,{cols:"6",md:"6"},{default:s(()=>[n(" \u0E23\u0E31\u0E1A\u0E23\u0E16\u0E40\u0E02\u0E49\u0E32\u0E25\u0E49\u0E32\u0E07 ")]),_:1}),e(u,{class:"text-end",cols:"6",md:"6"},{default:s(()=>[e(_,{color:"primary",onClick:i[0]||(i[0]=t=>m.openModal())},{default:s(()=>[e(F,{start:"",icon:"tabler-receipt"}),n(" \u0E23\u0E31\u0E1A\u0E23\u0E16\u0E25\u0E39\u0E01\u0E04\u0E49\u0E32 ")]),_:1})]),_:1})]),_:1}),e(C,{"fixed-header":"",density:"compact",class:"text-no-wrap"},{default:s(()=>[P,l("tbody",null,[(r(!0),c(v,null,V(o.bills,t=>(r(),c("tr",null,[l("td",G,d(t.percen)+" %",1),l("td",M,d(t.name_service),1),l("td",E,d(t.name_customer),1),l("td",L,d(t.mobile),1),l("td",R,d(t.name_admin),1),l("td",q,d(t.price),1),l("td",H,d(t.discount),1),l("td",J,d(t.total),1),l("th",K,[t.status=="success"?(r(),c("div",O,[e(N,{color:"success"},{default:s(()=>[n("\u0E40\u0E2A\u0E23\u0E47\u0E08\u0E41\u0E25\u0E49\u0E27")]),_:1})])):B("",!0),t.status=="wait"?(r(),c("div",Q,[e(N,{color:"warning"},{default:s(()=>[n("\u0E01\u0E33\u0E25\u0E31\u0E07\u0E25\u0E49\u0E32\u0E07")]),_:1})])):B("",!0)]),l("td",W,d(o.thaiDateNotime(t.created_date)),1),l("td",X,[l("td",null,[e(_,{size:"x-small",color:"primary",onClick:p=>{o.detail=!0,o.billDetail=t.detail},block:"",class:"mt-1"},{default:s(()=>[n(" \u0E23\u0E32\u0E22\u0E01\u0E32\u0E23 ")]),_:2},1032,["onClick"]),e(_,{disabled:t.percen==100,size:"x-small",color:"info",onClick:p=>m.updatePercen(30,t.id),block:"",class:"mt-1"},{default:s(()=>[n(" \u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08 30% ")]),_:2},1032,["disabled","onClick"]),e(_,{disabled:t.percen==100,size:"x-small",color:"info",onClick:p=>m.updatePercen(100,t.id),block:"",class:"mt-1"},{default:s(()=>[n(" \u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08 100% ")]),_:2},1032,["disabled","onClick"]),e(_,{target:"_blank",href:`/bill?bill_id=${t.id}`,size:"x-small",color:"success",onClick:p=>m.openBill(t),block:"",class:"mt-1"},{default:s(()=>[n(" \u0E1A\u0E34\u0E25 ")]),_:2},1032,["href","onClick"])])])]))),256))])]),_:1})]),_:1}),e(S,{modelValue:o.show,"onUpdate:modelValue":i[7]||(i[7]=t=>o.show=t),"max-width":"800"},{default:s(()=>[e(k,{onClick:i[1]||(i[1]=t=>o.show=!1)}),e(b,null,{default:s(()=>[e(D,null,{default:s(()=>[n(" \u0E23\u0E31\u0E1A\u0E23\u0E16\u0E25\u0E39\u0E01\u0E04\u0E49\u0E32 ")]),_:1}),e(x,null,{default:s(()=>[e(w,null,{default:s(()=>[e(u,{cols:"12"},{default:s(()=>[e(U,{modelValue:o.data.customer_id,"onUpdate:modelValue":i[2]||(i[2]=t=>o.data.customer_id=t),items:o.customers,"item-title":"name","item-value":"id",label:"\u0E25\u0E39\u0E01\u0E04\u0E49\u0E32","persistent-hint":""},null,8,["modelValue","items"])]),_:1}),e(u,{cols:"12"},{default:s(()=>[e(U,{modelValue:o.data.service_group_id,"onUpdate:modelValue":i[3]||(i[3]=t=>o.data.service_group_id=t),items:o.service_group,"item-title":"name","item-value":"id",label:"\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E15\u0E48\u0E32\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23","persistent-hint":""},null,8,["modelValue","items"])]),_:1}),e(u,{cols:"12"},{default:s(()=>[e(_,{color:"primary",onClick:i[4]||(i[4]=t=>m.getDataService())},{default:s(()=>[n(" \u0E04\u0E49\u0E19\u0E2B\u0E32\u0E04\u0E48\u0E32\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23 ")]),_:1})]),_:1}),e(u,{cols:"12"},{default:s(()=>[e(C,{"fixed-header":"",density:"compact",class:"text-no-wrap"},{default:s(()=>[Y,l("tbody",null,[(r(!0),c(v,null,V(o.service,t=>(r(),c("tr",null,[l("td",Z,d(t.id),1),l("td",$,d(t.title),1),l("td",tt,d(t.price),1),l("td",et,[e(_,{variant:"tonal",color:"primary",onClick:p=>m.choose(t)},{default:s(()=>[n(" \u0E40\u0E25\u0E37\u0E2D\u0E01 ")]),_:2},1032,["onClick"])])]))),256))])]),_:1})]),_:1}),(r(!0),c(v,null,V(o.data.service,t=>(r(),c("div",null,[e(w,{style:{padding:"5px"}},{default:s(()=>[e(u,{style:{padding:"15px"},cols:"3",md:"3"},{default:s(()=>[n(" \u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23 : "+d(t.name)+" ",1)]),_:2},1024),e(u,{cols:"2",md:"2"},{default:s(()=>[e(z,{type:"number",modelValue:t.price,"onUpdate:modelValue":p=>t.price=p,label:"\u0E04\u0E48\u0E32\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(u,{cols:"2",md:"2"},{default:s(()=>[e(z,{type:"number",modelValue:t.discount,"onUpdate:modelValue":p=>t.discount=p,label:"\u0E2A\u0E48\u0E27\u0E19\u0E25\u0E14"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(u,{style:{padding:"15px"},cols:"3",md:"3"},{default:s(()=>[n(" \u0E23\u0E27\u0E21 : "+d(t.price-t.discount),1)]),_:2},1024),e(u,{cols:"1",md:"1"},{default:s(()=>[e(_,{variant:"tonal",color:"error",onClick:p=>m.deleteArray(t)},{default:s(()=>[n(" \u0E25\u0E1A ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]))),256))]),_:1})]),_:1}),e(x,{class:"d-flex justify-end flex-wrap gap-3"},{default:s(()=>[e(_,{variant:"tonal",color:"secondary",onClick:i[5]||(i[5]=t=>o.show=!1)},{default:s(()=>[n(" \u0E1B\u0E34\u0E14 ")]),_:1}),e(_,{color:"primary",onClick:i[6]||(i[6]=t=>m.saveDate())},{default:s(()=>[n(" \u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(S,{modelValue:o.detail,"onUpdate:modelValue":i[10]||(i[10]=t=>o.detail=t),"max-width":"800"},{default:s(()=>[e(k,{onClick:i[8]||(i[8]=t=>o.detail=!1)}),e(b,null,{default:s(()=>[e(D,null,{default:s(()=>[n(" \u0E23\u0E32\u0E22\u0E01\u0E32\u0E23 ")]),_:1}),e(x,null,{default:s(()=>[e(C,{"fixed-header":"",density:"compact",class:"text-no-wrap"},{default:s(()=>[lt,l("tbody",null,[(r(!0),c(v,null,V(o.billDetail,t=>(r(),c("tr",null,[l("td",st,d(t.title),1),l("td",at,d(t.price),1),l("td",it,d(t.discount),1),l("td",ot,d(t.total),1)]))),256))])]),_:1})]),_:1}),e(x,{class:"d-flex justify-end flex-wrap gap-3"},{default:s(()=>[e(_,{variant:"tonal",color:"secondary",onClick:i[9]||(i[9]=t=>o.detail=!1)},{default:s(()=>[n(" \u0E1B\u0E34\u0E14 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})])}const Nt=j(I,[["render",nt]]);export{Nt as default};
