import{_ as z}from"./DialogCloseBtn.a9eea126.js";import{y as I,k as g,bX as f,r as b,o as _,c as v,m as n,p as a,w as o,O as V,P as h,E as c,A as x,z as p,F as P,a as E,v as B,L as N,M as L,N as O,Q as U,U as r}from"./index.08e9078e.js";import{h as A}from"./moment.9709ab41.js";import{Q as M}from"./vue-quill.snow.48baeb12.js";import{deletePopup as Q,getPopup as j}from"./AgentFunction.59cfd842.js";import{V as Y}from"./VTable.794b1e77.js";import{V as F}from"./VDialog.74576e46.js";import"./scopeId.7dd2bcb9.js";import"./lazy.06c7709b.js";const J={components:{QuillEditor:M},setup(){const C=g("https://api.niyomlotto.com/"),t=g({id:0,header:"",detail:"",created_date:"",status:"",agents_id:"",master_id:""});let i=g(!1);const l=g([]),k=async()=>{i.value=!0,t.value.id=0,t.value.header="",t.value.detail="",t.value.created_date="",t.value.status="",t.value.agents_id="",t.value.master_id=""},w=async e=>{i.value=!0,t.value.id=e.id,t.value.header=e.header,t.value.detail=e.detail,t.value.created_date=e.created_date,t.value.status=e.status,t.value.agents_id=e.agents_id,t.value.master_id=e.master_id};var m={method:"get",url:`${C.value}agents/get_popup`,headers:{Authorization:`bearer ${JSON.parse(localStorage.getItem("token"))}`,"Content-type":"application/json"}};f(m).then(function(e){l.value=e.data.resule}).catch(function(e){console.log(e)});const y=async()=>{let e=await j();l.value=e.resule};return{input:t,isDialogVisible:i,popupData:l,moment:A,addPopup:k,editPopup:w,deleteNewsList:async e=>{r.fire({title:"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E17\u0E33\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23 ?",text:"\u0E25\u0E1A\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23 !",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"OK"}).then(async d=>{d.isConfirmed==!0?(await Q(e.id)).status=="success"?(await y(),r.fire("\u0E17\u0E33\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!","\u0E17\u0E33\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E40\u0E40\u0E25\u0E49\u0E27","success")):r.fire("\u0E17\u0E33\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E44\u0E21\u0E48\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!","\u0E25\u0E2D\u0E07\u0E43\u0E2B\u0E21\u0E48\u0E2D\u0E35\u0E01\u0E04\u0E23\u0E31\u0E49\u0E07","error"):r.fire("\u0E17\u0E33\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E44\u0E21\u0E48\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!","\u0E25\u0E2D\u0E07\u0E43\u0E2B\u0E21\u0E48\u0E2D\u0E35\u0E01\u0E04\u0E23\u0E31\u0E49\u0E07","error")})},onSubmit:async()=>{(await f.create({baseURL:"https://api.niyomlotto.com/"}).post("/agents/add_popup",t.value,{headers:{Authorization:`bearer ${JSON.parse(localStorage.getItem("token"))}`,"Content-Type":"application/json"}}).then(s=>s.data).catch(s=>s.response.data)).status=="success"?(i.value=!1,r.fire({title:"Success!",text:"\u0E17\u0E33\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23 \u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",icon:"success",confirmButtonText:"Ok"}),f(m).then(function(s){l.value=s.data.resule}).catch(function(s){console.log(s)})):(i.value=!1,r.fire({title:"Error!",text:"\u0E17\u0E33\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E44\u0E21\u0E48\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",icon:"error",confirmButtonText:"Ok"}))},published:async e=>{(await f.create({baseURL:"https://api.niyomlotto.com/"}).post("/agents/published_popup",{id:e.id},{headers:{Authorization:`bearer ${JSON.parse(localStorage.getItem("token"))}`,"Content-Type":"application/json"}}).then(u=>u.data).catch(u=>u.response.data)).status=="success"?(i.value=!1,r.fire({title:"Success!",text:"\u0E17\u0E33\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23 \u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",icon:"success",confirmButtonText:"Ok"}),f(m).then(function(u){l.value=u.data.resule}).catch(function(u){console.log(u)})):(i.value=!1,r.fire({title:"Error!",text:"\u0E17\u0E33\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E44\u0E21\u0E48\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",icon:"error",confirmButtonText:"Ok"}))}}}},R=n("h3",null,"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E1B\u0E47\u0E2D\u0E1B\u0E2D\u0E31\u0E1E",-1),H=n("thead",null,[n("tr",null,[n("th",null,"\u0E2B\u0E31\u0E27\u0E02\u0E49\u0E2D \u0E1B\u0E49\u0E2D\u0E1A\u0E2D\u0E31\u0E1E"),n("th",null,"\u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14"),n("th",null,"\u0E1B\u0E23\u0E30\u0E01\u0E32\u0E28\u0E40\u0E21\u0E37\u0E48\u0E2D"),n("th",null,"\u0E2A\u0E16\u0E32\u0E19\u0E30"),n("th",null,"\u0E41\u0E01\u0E49\u0E44\u0E02")])],-1),K={key:0},X={key:1};function q(C,t,i,l,k,w){const m=b("v-card-header"),y=b("diV"),S=b("v-card-body"),D=z,T=b("QuillEditor");return _(),v("div",null,[n("div",null,[a(L,{"no-body":"",class:"mb-0 p-10",style:{padding:"20px"}},{default:o(()=>[a(m,null,{default:o(()=>[R]),_:1}),a(S,null,{default:o(()=>[a(V,null,{default:o(()=>[a(h,{cols:"12",style:{"margin-top":"20px"}},{default:o(()=>[a(c,{onClick:t[0]||(t[0]=e=>l.addPopup()),size:"small",class:"mr-2"},{default:o(()=>[a(x,{icon:"tabler-plus"}),p(" \u0E40\u0E1E\u0E34\u0E48\u0E21\u0E1B\u0E49\u0E2D\u0E1A\u0E2D\u0E31\u0E1E ")]),_:1})]),_:1})]),_:1}),a(V,null,{default:o(()=>[a(h,{cols:"12",style:{"margin-top":"20px"}},{default:o(()=>[a(Y,{class:"text-no-wrap invoice-list-table"},{default:o(()=>[H,n("tbody",null,[(_(!0),v(P,null,E(l.popupData,e=>(_(),v("tr",null,[n("td",null,B(e.header),1),n("td",null,[a(y,{id:"preview",innerHTML:e.detail},null,8,["innerHTML"])]),n("td",null,B(l.moment(e.created_date).format("DD-MM-YYYY h:mm:ss a")),1),n("td",null,[e.status=="use"?(_(),v("div",K,"\u0E44\u0E21\u0E48\u0E44\u0E14\u0E49\u0E40\u0E40\u0E2A\u0E14\u0E07")):N("",!0),p(),e.status=="published"?(_(),v("div",X,"\u0E41\u0E2A\u0E14\u0E07\u0E1C\u0E25")):N("",!0)]),n("td",null,[a(c,{onClick:d=>l.editPopup(e),size:"small",class:"mr-2"},{default:o(()=>[a(x,{icon:"tabler-settings"}),p(" \u0E41\u0E01\u0E49\u0E44\u0E02 ")]),_:2},1032,["onClick"]),a(c,{onClick:d=>l.published(e),size:"small",class:"mr-2"},{default:o(()=>[p(" \u0E40\u0E1C\u0E22\u0E40\u0E40\u0E1E\u0E23\u0E48 ")]),_:2},1032,["onClick"]),a(c,{onClick:d=>l.deleteNewsList(e),color:"error",size:"small"},{default:o(()=>[a(x,{icon:"tabler-x"})]),_:2},1032,["onClick"])])]))),256))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),n("div",null,[a(F,{modelValue:l.isDialogVisible,"onUpdate:modelValue":t[6]||(t[6]=e=>l.isDialogVisible=e),"max-width":"800"},{default:o(()=>[a(D,{onClick:t[1]||(t[1]=e=>l.isDialogVisible=!l.isDialogVisible)}),a(L,{title:"Agent Support Profile"},{default:o(()=>[a(O,null,{default:o(()=>[a(V,null,{default:o(()=>[a(h,{cols:"12",sm:"12",md:"12"},{default:o(()=>[a(U,{modelValue:l.input.header,"onUpdate:modelValue":t[2]||(t[2]=e=>l.input.header=e),label:"\u0E2B\u0E31\u0E27\u0E02\u0E49\u0E2D\u0E1B\u0E47\u0E2D\u0E1B\u0E2D\u0E31\u0E1E",placeholder:"\u0E2B\u0E31\u0E27\u0E02\u0E49\u0E2D\u0E1B\u0E47\u0E2D\u0E1B\u0E2D\u0E31\u0E1E"},null,8,["modelValue"])]),_:1}),a(h,{cols:"12",sm:"12",md:"12"},{default:o(()=>[a(h,null,{default:o(()=>[a(T,{contentType:"html",content:l.input.detail,"onUpdate:content":t[3]||(t[3]=e=>l.input.detail=e),theme:"snow",toolbar:"full",style:{height:"400px"}},null,8,["content"])]),_:1})]),_:1})]),_:1})]),_:1}),a(O,{class:"d-flex justify-end flex-wrap gap-3"},{default:o(()=>[a(c,{variant:"tonal",color:"secondary",onClick:t[4]||(t[4]=e=>l.isDialogVisible=!1)},{default:o(()=>[p(" Close ")]),_:1}),a(c,{onClick:t[5]||(t[5]=e=>l.onSubmit())},{default:o(()=>[p(" Save ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])}const ne=I(J,[["render",q]]);export{ne as default};
