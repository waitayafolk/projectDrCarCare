import{_ as v}from"./DialogCloseBtn.a9eea126.js";import{y,S as h,U as f,o as x,c as w,p as t,w as a,P as d,O as V,Q as c,E as i,z as u,A as b,N as g,m as o,F as A,a as M,v as p,M as C,ac as U,bv as T}from"./index.08e9078e.js";import"./Function.526621ac.js";import{V as B}from"./VTable.794b1e77.js";import{V as P}from"./VChip.d13526f8.js";import{V as S}from"./VPagination.f453cc9a.js";import{V as E}from"./VSelect.8ea6ce08.js";import{V as D}from"./VDialog.74576e46.js";import"./VList.2ba00a19.js";import"./VDivider.6a220979.js";import"./scopeId.7dd2bcb9.js";import"./lazy.06c7709b.js";import"./VMenu.80d823a6.js";import"./VCheckboxBtn.79b29e49.js";import"./VSelectionControl.e15bfe62.js";const F={components:{},data(){return{remark:"",credit:0,modalAddCredit:!1,SearchText:"",currentPage:1,length:0,agents:[],masters:[],isPasswordVisible:!1,showModal:!1,userData:{name:"",username:"",password:"",brands_id:"",id:"",master_id:"",email:"",mobile:"",changpassword:!1}}},mounted(){this.getAgent(),this.getMaster()},methods:{async openModal(){this.showModal=!0,this.userData={name:"",username:"",password:"",brands_id:"",id:"",master_id:"",email:"",mobile:"",changpassword:!1}},async getMaster(){await h({method:"get",url:"/admin/get_master",data:[],params:[]}).then(r=>{let e=[];for(let n of r)e.push({text:n.name,value:n.id});this.masters=e}).catch(r=>{console.log(r)})},async getAgent(){let r={search:this==null?void 0:this.SearchText},e={limit:20,sort:"desc",status:"use",page:this.currentPage};await h({method:"post",url:"/administrator/users/agent",data:e,params:r}).then(n=>{this.length=n.lastPage,this.agents=n.data}).catch(n=>{console.log(n)})},async saveData(){await h({method:"post",url:"/admin/add_agents",data:this.userData,params:{}}).then(r=>{r=="success"?(f.fire({title:"Success!",text:"\u0E17\u0E33\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23 \u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",icon:"success",confirmButtonText:"Ok"}),this.getAgent(),this.showModal=!1):(this.showModal=!1,f.fire({title:"Error!",text:"\u0E17\u0E33\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E44\u0E21\u0E48\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",icon:"error",confirmButtonText:"Ok"}))}).catch(r=>{console.log(r)})},async editData(r){this.userData=r,this.userData.changpassword=!1,this.showModal=!0},async addCredit(r){this.modalAddCredit=!0,this.userData=r},async saveCredit(){let r={agents_id:this.userData.id,credit:this.credit,remark:this.remark};await h({method:"post",url:"/admin/save_credit_agents",data:r,params:[]}).then(e=>{e=="success"?(f.fire({title:"Success!",text:"\u0E17\u0E33\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23 \u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",icon:"success",confirmButtonText:"Ok"}),this.getAgent(),this.modalAddCredit=!1,this.credit=0):(this.modalAddCredit=!1,f.fire({title:"Error!",text:"\u0E17\u0E33\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E44\u0E21\u0E48\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",icon:"error",confirmButtonText:"Ok"}))}).catch(e=>{console.log(e)})},async deleteAgents(r){f.fire({title:"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E01\u0E32\u0E23\u0E25\u0E1A?",showCancelButton:!0,confirmButtonText:"\u0E25\u0E1A"}).then(async e=>{e.isConfirmed&&await h({method:"delete",url:"/admin/del_agent/"+r,data:[],params:[]}).then(n=>{n=="success"?(f.fire({title:"Success!",text:"\u0E17\u0E33\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23 \u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",icon:"success",confirmButtonText:"Ok"}),this.getAgent(),this.showModal=!1):(this.showModal=!1,f.fire({title:"Error!",text:"\u0E17\u0E33\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E44\u0E21\u0E48\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",icon:"error",confirmButtonText:"Ok"}))}).catch(n=>{console.log(n)})})}}},O=o("h1",null,"\u0E23\u0E32\u0E22\u0E0A\u0E37\u0E48\u0E2D\u0E40\u0E2D\u0E40\u0E22\u0E19\u0E15\u0E4C",-1),z=o("thead",null,[o("tr",null,[o("th",null,"\u0E2A\u0E16\u0E32\u0E19\u0E30"),o("th",null,"\u0E22\u0E39\u0E2A\u0E40\u0E0B\u0E2D\u0E23\u0E4C\u0E40\u0E19\u0E21"),o("th",null,"\u0E21\u0E32\u0E2A\u0E40\u0E15\u0E2D\u0E23\u0E4C"),o("th",{class:"text-end"},"\u0E40\u0E04\u0E23\u0E14\u0E34\u0E15"),o("th",{class:"text-end"},"\u0E40\u0E04\u0E23\u0E14\u0E34\u0E15\u0E2A\u0E21\u0E32\u0E0A\u0E34\u0E01"),o("th",{class:"text-center"},"\u0E08\u0E33\u0E19\u0E27\u0E19\u0E2A\u0E21\u0E32\u0E0A\u0E34\u0E01"),o("th",{class:"text-center"},"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C"),o("th",{class:"text-center"},"\u0E04\u0E2D\u0E21\u0E21\u0E34\u0E0A\u0E0A\u0E31\u0E48\u0E19"),o("th",{class:"text-center"},"AF"),o("th",null,"\u0E01\u0E23\u0E30\u0E17\u0E33")])],-1),N={class:"text-end"},j={class:"text-end"},q={class:"text-center"},I={class:"text-center"},L=o("td",{class:"text-center"},"1%",-1),Q=o("td",{class:"text-center"},"8%",-1),R=["disabled"];function G(r,e,n,H,s,m){const _=v;return x(),w("div",null,[t(V,{class:"mb-3"},{default:a(()=>[t(d,null,{default:a(()=>[O]),_:1})]),_:1}),t(V,{justify:"space-between",class:"mb-3"},{default:a(()=>[t(d,{md:"7"},{default:a(()=>[t(V,null,{default:a(()=>[t(d,{md:"6"},{default:a(()=>[t(c,{label:"\u0E04\u0E49\u0E19\u0E2B\u0E32",modelValue:s.SearchText,"onUpdate:modelValue":e[0]||(e[0]=l=>s.SearchText=l),"prepend-inner-icon":"tabler-search"},null,8,["modelValue"])]),_:1}),t(d,null,{default:a(()=>[t(i,{onClick:e[1]||(e[1]=l=>m.getAgent())},{default:a(()=>[u(" \u0E04\u0E49\u0E19\u0E2B\u0E32 ")]),_:1})]),_:1})]),_:1})]),_:1}),t(d,{md:"auto"},{default:a(()=>[t(i,{onClick:e[2]||(e[2]=l=>m.openModal()),color:"primary"},{default:a(()=>[t(b,{start:"",icon:"tabler-plus"}),u(" \u0E40\u0E1E\u0E34\u0E48\u0E21\u0E40\u0E2D\u0E40\u0E22\u0E19\u0E15\u0E4C ")]),_:1})]),_:1})]),_:1}),t(C,null,{default:a(()=>[t(g,null,{default:a(()=>[t(B,null,{default:a(()=>[z,o("tbody",null,[(x(!0),w(A,null,M(s.agents,l=>(x(),w("tr",null,[o("td",null,[t(P,{color:"success"},{default:a(()=>[u("\u0E1B\u0E01\u0E15\u0E34")]),_:1})]),o("td",null,p(l.username),1),o("td",null,p(l.master.username),1),o("td",N,p(r.numeralFormat(l.credit_balance)),1),o("td",j,p(r.numeralFormat(l.user.length?l.user[0].total_credit:"-")),1),o("td",q,p(r.numeralFormat(l.user.length?l.user[0].total_user:"-")),1),o("td",I,p(l.mobile),1),L,Q,o("td",null,[t(i,{onClick:k=>m.addCredit(l),size:"small",class:"mr-2"},{default:a(()=>[u("\u0E40\u0E15\u0E34\u0E21\u0E40\u0E04\u0E23\u0E14\u0E34\u0E15\u0E04\u0E37\u0E19")]),_:2},1032,["onClick"]),t(i,{onClick:k=>m.editData(l),size:"small",class:"mr-2"},{default:a(()=>[t(b,{icon:"tabler-settings"}),u(" \u0E41\u0E01\u0E49\u0E44\u0E02")]),_:2},1032,["onClick"]),t(i,{onClick:k=>m.deleteAgents(l.id),color:"error",size:"small"},{default:a(()=>[t(b,{icon:"tabler-x"})]),_:2},1032,["onClick"])])]))),256))])]),_:1})]),_:1}),t(S,{class:"text-center",style:{padding:"10px"},modelValue:s.currentPage,"onUpdate:modelValue":e[3]||(e[3]=l=>s.currentPage=l),length:s.length,onClick:e[4]||(e[4]=l=>m.getAgent()),rounded:"circle"},null,8,["modelValue","length"])]),_:1}),t(D,{modelValue:s.showModal,"onUpdate:modelValue":e[16]||(e[16]=l=>s.showModal=l),"max-width":"800"},{default:a(()=>[t(_,{onClick:e[5]||(e[5]=l=>s.showModal=!1)}),t(C,{title:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E40\u0E2D\u0E40\u0E22\u0E48\u0E19"},{default:a(()=>[t(g,null,{default:a(()=>[t(V,null,{default:a(()=>[t(d,{cols:"6",sm:"6",md:"6"},{default:a(()=>[t(c,{modelValue:s.userData.name,"onUpdate:modelValue":e[6]||(e[6]=l=>s.userData.name=l),label:"\u0E0A\u0E37\u0E48\u0E2D\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19",placeholder:"\u0E0A\u0E37\u0E48\u0E2D\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19"},null,8,["modelValue"])]),_:1}),t(d,{cols:"6",sm:"6",md:"6"},{default:a(()=>[t(c,{modelValue:s.userData.email,"onUpdate:modelValue":e[7]||(e[7]=l=>s.userData.email=l),label:"E-mail",placeholder:"E-mail"},null,8,["modelValue"])]),_:1}),t(d,{cols:"6",sm:"6",md:"6"},{default:a(()=>[t(c,{modelValue:s.userData.mobile,"onUpdate:modelValue":e[8]||(e[8]=l=>s.userData.mobile=l),label:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23",placeholder:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23"},null,8,["modelValue"])]),_:1}),t(d,{cols:"6",sm:"6",md:"6"}),t(d,{cols:"12",sm:"12",md:"12"},{default:a(()=>[t(c,{modelValue:s.userData.username,"onUpdate:modelValue":e[9]||(e[9]=l=>s.userData.username=l),label:"Username",placeholder:"Username"},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",sm:"12",md:"12"},{default:a(()=>[U(o("input",{disabled:s.userData.id=="",type:"checkbox",id:"checkbox","onUpdate:modelValue":e[10]||(e[10]=l=>s.userData.changpassword=l)},null,8,R),[[T,s.userData.changpassword]]),t(c,{disabled:s.userData.id==""?!1:s.userData.changpassword!=!0,modelValue:s.userData.password,"onUpdate:modelValue":e[11]||(e[11]=l=>s.userData.password=l),label:"password",placeholder:"password",type:s.isPasswordVisible?"text":"password",rules:[r.requiredValidator],"append-inner-icon":s.isPasswordVisible?"tabler-eye-off":"tabler-eye","onClick:appendInner":e[12]||(e[12]=l=>s.isPasswordVisible=!s.isPasswordVisible)},null,8,["disabled","modelValue","type","rules","append-inner-icon"])]),_:1}),t(d,{cols:"12",sm:"12",md:"12"},{default:a(()=>[t(E,{modelValue:s.userData.master_id,"onUpdate:modelValue":e[13]||(e[13]=l=>s.userData.master_id=l),label:"Choose Master",items:s.masters,"item-title":"text","item-value":"value"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),t(g,{class:"d-flex justify-end flex-wrap gap-3"},{default:a(()=>[t(i,{variant:"tonal",color:"secondary",onClick:e[14]||(e[14]=l=>s.showModal=!1)},{default:a(()=>[u(" Close ")]),_:1}),t(i,{onClick:e[15]||(e[15]=l=>m.saveData())},{default:a(()=>[u(" Save ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(D,{modelValue:s.modalAddCredit,"onUpdate:modelValue":e[22]||(e[22]=l=>s.modalAddCredit=l),"max-width":"800"},{default:a(()=>[t(_,{onClick:e[17]||(e[17]=l=>s.modalAddCredit=!1)}),t(C,{title:"\u0E40\u0E15\u0E34\u0E21\u0E40\u0E04\u0E23\u0E14\u0E34\u0E15\u0E04\u0E37\u0E19\u0E43\u0E2B\u0E49\u0E40\u0E2D\u0E40\u0E22\u0E48\u0E19\u0E15\u0E4C"},{default:a(()=>[t(g,null,{default:a(()=>[t(V,null,{default:a(()=>[t(d,{cols:"12",sm:"12",md:"12"},{default:a(()=>[t(c,{type:"number",modelValue:s.credit,"onUpdate:modelValue":e[18]||(e[18]=l=>s.credit=l),label:"\u0E40\u0E04\u0E23\u0E14\u0E34\u0E15",placeholder:"\u0E40\u0E04\u0E23\u0E14\u0E34\u0E15"},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",sm:"12",md:"12"},{default:a(()=>[t(c,{type:"text",modelValue:s.remark,"onUpdate:modelValue":e[19]||(e[19]=l=>s.remark=l),label:"\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E2B\u0E15\u0E38",placeholder:"\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E2B\u0E15\u0E38"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(g,{class:"d-flex justify-end flex-wrap gap-3"},{default:a(()=>[t(i,{variant:"tonal",color:"secondary",onClick:e[20]||(e[20]=l=>s.modalAddCredit=!1)},{default:a(()=>[u(" Close ")]),_:1}),t(i,{onClick:e[21]||(e[21]=l=>m.saveCredit())},{default:a(()=>[u(" Save ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const ne=y(F,[["render",G]]);export{ne as default};
