import{X as B,aD as L,be as J,al as R,ao as T,Y as D,Z as $,aH as q,bf as z,as as E,aw as F,k as g,D as O,b4 as M,I as U,p as t,ay as j,a3 as H,a4 as I,a5 as X,j as Y,o as V,c as y,w as s,E as S,q as m,A as Z,b as G,z as _,v as N,L as K,F as P,a as Q,m as W,R as ee}from"./index.08e9078e.js";import{V as x}from"./VBadge.c835c37b.js";import{V as te}from"./VMenu.80d823a6.js";import{V as ae,a as w}from"./VList.2ba00a19.js";import{V as se}from"./VChip.d13526f8.js";import{V as A}from"./VDivider.6a220979.js";import{m as oe,u as le,f as ne,b as ie}from"./scopeId.7dd2bcb9.js";const re=B()({name:"VSnackbar",props:{multiLine:Boolean,timeout:{type:[Number,String],default:5e3},vertical:Boolean,...L({location:"bottom"}),...J(),...R(),...T(),...D(oe({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},emits:{"update:modelValue":a=>!0},setup(a,h){let{slots:n}=h;const i=$(a,"modelValue"),{locationStyles:f}=q(a),{positionClasses:p}=z(a),{scopeId:o}=le(),{colorClasses:u,colorStyles:b,variantClasses:C}=E(a),{roundedClasses:k}=F(a),c=g();O(i,r),O(()=>a.timeout,r),M(()=>{i.value&&r()});let d=-1;function r(){window.clearTimeout(d);const e=Number(a.timeout);!i.value||e===-1||(d=window.setTimeout(()=>{i.value=!1},e))}function v(){window.clearTimeout(d)}return U(()=>{const[e]=ne(a);return t(ie,I({ref:c,class:["v-snackbar",{"v-snackbar--active":i.value,"v-snackbar--multi-line":a.multiLine&&!a.vertical,"v-snackbar--vertical":a.vertical},p.value]},e,{modelValue:i.value,"onUpdate:modelValue":l=>i.value=l,contentProps:I({style:f.value},e.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none"},o),{default:()=>[t("div",{class:["v-snackbar__wrapper",u.value,k.value,C.value],style:[b.value],onPointerenter:v,onPointerleave:r},[j(!1,"v-snackbar"),n.default&&t("div",{class:"v-snackbar__content",role:"status","aria-live":"polite"},[n.default()]),n.actions&&t(H,{defaults:{VBtn:{variant:"text",ripple:!1}}},{default:()=>[t("div",{class:"v-snackbar__actions"},[n.actions()])]})])],activator:n.activator})}),X({},c)}}),ue="/assets/sound1.d081da07.ogg";const ce={class:"whitespace-no-wrap text-medium-emphasis"},_e={__name:"Notifications",props:{notifications:{type:Array,required:!0},badgeProps:{type:null,required:!1,default:void 0},location:{type:null,required:!1,default:"bottom end"}},emits:["click:readAllNotifications"],setup(a,{emit:h}){const n=a,i=Y();let f=g(!1),p=new Audio(ue),o=g([]);const u=g(!1),b=g("");let k=new Pusher("937c69fa3c15f8fc2cff",{cluster:"ap1"}).subscribe("my-channel"),c;JSON.parse(localStorage.getItem("result_data"))!=null&&JSON.parse(localStorage.getItem("result_data"))!=null?JSON.parse(localStorage.getItem("result_data")).role_id>0?c=JSON.parse(localStorage.getItem("result_data")).role_id:c=JSON.parse(localStorage.getItem("result_data")).id:c=0,k.bind(`my-event${c}`,function(v){f.value=!0,f.value===!0&&setInterval(function(){f.value===!0?p.play():p.pause()},1e3),u.value=!0,b.value=`${v.subtitle} ${v.message} `;let e=JSON.parse(sessionStorage.getItem("notification"));(e==null||e==null)&&(e=[]),e.push(v),o.value=e,sessionStorage.setItem("notification",JSON.stringify(e))});let d=JSON.parse(sessionStorage.getItem("notification"));d==null||d==null?o.value=[]:o.value=d;const r=async()=>{f.value=!1,p.pause(),sessionStorage.clear("notification"),o.value=[],i.push("/agents/transferuser")};return(v,e)=>(V(),y(P,null,[t(x,I({"model-value":!!n.badgeProps},n.badgeProps),{default:s(()=>[t(S,{icon:"",variant:"text",color:"default",size:"small"},{default:s(()=>[t(x,{"model-value":!!m(o).length,color:"error",content:m(o).length},{default:s(()=>[t(Z,{icon:"tabler-bell",size:"24"})]),_:1},8,["model-value","content"]),t(te,{activator:"parent",width:"380px",location:n.location,offset:"14px"},{default:s(()=>[t(ae,{class:"py-0"},{default:s(()=>[t(w,{title:"Notifications",class:"notification-section",height:"48px"},{append:s(()=>[m(o).length?(V(),G(se,{key:0,color:"primary",size:"small"},{default:s(()=>[_(N(m(o).length)+" New ",1)]),_:1})):K("",!0)]),_:1}),t(A),(V(!0),y(P,null,Q(m(o),l=>(V(),y(P,{key:l.title},[t(w,{title:l.title,subtitle:l.subtitle,link:"",lines:"one","min-height":"66px",onClick:e[0]||(e[0]=de=>r())},{append:s(()=>[W("small",ce,N(l.message),1)]),_:2},1032,["title","subtitle"]),t(A)],64))),128)),t(w,{class:"notification-section"},{default:s(()=>[t(S,{block:"",onClick:e[1]||(e[1]=l=>r())},{default:s(()=>[_(" READ ALL NOTIFICATIONS ")]),_:1})]),_:1})]),_:1})]),_:1},8,["location"])]),_:1})]),_:1},16,["model-value"]),t(re,{modelValue:m(u),"onUpdate:modelValue":e[3]||(e[3]=l=>ee(u)?u.value=l:null),vertical:"",color:"default",location:"center"},{actions:s(()=>[t(S,{color:"default",onClick:e[2]||(e[2]=l=>{r(),u.value=!1})},{default:s(()=>[_(" Close ")]),_:1})]),default:s(()=>[_(N(m(b))+" ",1)]),_:1},8,["modelValue"])],64))}};export{_e as _};
