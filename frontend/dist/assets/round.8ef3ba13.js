import{_ as B}from"./AppDateTimePicker.0e1428a4.js";import{_ as I}from"./DialogCloseBtn.a9eea126.js";import{y as L,S as N,U as c,o as u,c as i,p as t,w as e,P as m,O as w,z as d,N as b,F as p,a as R,E as _,v as f,m as s,s as U,M as C,Q as z}from"./index.08e9078e.js";import{V as T,a as E}from"./VTabs.e0e0f4e0.js";import{V as h}from"./VDivider.6a220979.js";import{V as j,a as y}from"./VWindowItem.1f013228.js";import{V as F,a as A,b as D,c as S}from"./VList.2ba00a19.js";import{V as M}from"./VBadge.c835c37b.js";import{V as J}from"./VTable.794b1e77.js";import{V as P}from"./VDialog.74576e46.js";import"./lazy.06c7709b.js";import"./scopeId.7dd2bcb9.js";const V=N.create({baseURL:"https://api.niyomlotto.com/"}),H={components:{AppDateTimePicker:B},data(){return{lottoRound:{title:"",start_date:"",end_date:"",lotto_id:0,lotto_title:""},showModalAdd:!1,date:"",tab:"lotto",lotto_groups:[],rounds:[]}},mounted(){this.getData()},methods:{async openModal(){this.lottoRound.lotto_id==0?c.fire({title:"Error!",text:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E1B\u0E23\u0E30\u0E20\u0E17\u0E2B\u0E27\u0E22",icon:"error",confirmButtonText:"Ok"}):this.showModalAdd=!0},async getData(){let n=await V.get("/admin/lotto-groups",{headers:{Authorization:`bearer ${JSON.parse(localStorage.getItem("token"))}`,"Content-type":"application/json"}}).then(o=>o.data).catch(o=>o.response.data);this.lotto_groups=n.data},async chooseLotto(n){this.lottoRound.lotto_id=n.id,this.lottoRound.lotto_title=n.title,this.tab="period";let o=await V.get("/admin/lotto-groups-detail/"+n.id+"?slug="+n.slug,{headers:{Authorization:`bearer ${JSON.parse(localStorage.getItem("token"))}`,"Content-type":"application/json"}}).then(r=>r.data).catch(r=>r.response.data);for(let r of o.data){let k=await V.get("/admin/lotto-groups-rate/"+r.id,{headers:{Authorization:`bearer ${JSON.parse(localStorage.getItem("token"))}`,"Content-type":"application/json"}}).then(a=>a.data).catch(a=>a.response.data);r.detail=k.data}this.rounds=o.data},async chooseRound(n){},async saveData(){if(this.lottoRound.lotto_id==0||this.lottoRound.start_date==""||this.lottoRound.end_date=="")this.showModalAdd=!1,c.fire({title:"Error!",text:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E43\u0E2B\u0E49\u0E04\u0E23\u0E1A",icon:"error",confirmButtonText:"Ok"});else if(new Date(this.lottoRound.end_date)-new Date(this.lottoRound.start_date)<0||new Date(this.lottoRound.end_date)-new Date<0)this.showModalAdd=!1,c.fire({title:"Error!",text:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E1B\u0E34\u0E14 - \u0E1B\u0E34\u0E14 \u0E43\u0E2B\u0E49\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07",icon:"error",confirmButtonText:"Ok"});else{const n=await V.post("/admin/save_lotto_round",this.lottoRound,{headers:{Authorization:`bearer ${JSON.parse(localStorage.getItem("token"))}`,"Content-Type":"application/json"}}).then(o=>o.data).catch(o=>o.response.data);n.status=="success"?(this.showModalAdd=!1,this.tab="lotto",c.fire({title:"Success!",text:"\u0E17\u0E33\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23 \u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",icon:"success",confirmButtonText:"Ok"}),this.lottoRound.title="",this.lottoRound.lotto_id=0,this.lottoRound.end_date="",this.lottoRound.start_date="",this.getData()):(this.showModalAdd=!1,c.fire({title:"Error!",text:n.message,icon:"error",confirmButtonText:"Ok"}))}}}},W=s("h1",null,"\u0E23\u0E2D\u0E1A\u0E2B\u0E27\u0E22",-1),Y=s("span",{class:"ms-4"},"\u0E40\u0E1B\u0E34\u0E14\u0E23\u0E31\u0E1A\u0E41\u0E17\u0E07",-1),Q=s("thead",null,[s("tr",null,[s("th",null,"\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17"),s("th",null,"\u0E23\u0E32\u0E04\u0E32\u0E08\u0E48\u0E32\u0E22"),s("th"),s("th")])],-1),q=s("td",null,null,-1),G=s("td",null,null,-1);function K(n,o,r,k,a,g){const O=I,v=B;return u(),i("div",null,[t(w,{class:"mb-2"},{default:e(()=>[t(m,null,{default:e(()=>[W]),_:1})]),_:1}),t(E,{modelValue:a.tab,"onUpdate:modelValue":o[0]||(o[0]=l=>a.tab=l)},{default:e(()=>[t(T,{value:"lotto"},{default:e(()=>[d(" \u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E2B\u0E27\u0E22 ")]),_:1}),t(T,{value:"period"},{default:e(()=>[d(" \u0E23\u0E2D\u0E1A\u0E2B\u0E27\u0E1A ")]),_:1})]),_:1},8,["modelValue"]),t(h),t(C,{flat:""},{default:e(()=>[t(b,null,{default:e(()=>[t(j,{modelValue:a.tab,"onUpdate:modelValue":o[2]||(o[2]=l=>a.tab=l)},{default:e(()=>[t(y,{value:"lotto"},{default:e(()=>[t(F,null,{default:e(()=>[(u(!0),i(p,null,R(a.lotto_groups,l=>(u(),i(p,null,[t(A,{class:"mt-2"},{append:e(()=>[t(_,{onClick:x=>g.chooseLotto(l),size:"small"},{default:e(()=>[d(" \u0E40\u0E25\u0E37\u0E2D\u0E01 ")]),_:2},1032,["onClick"])]),default:e(()=>[t(D,{class:"text-h5"},{default:e(()=>[d(f(l.title),1)]),_:2},1024),t(S,{class:"mt-1"},{default:e(()=>[t(M,{dot:"",location:"start center","offset-x":"2",color:l.status==="use"?"success":"error",class:"me-3"},{default:e(()=>[s("span",{class:U(["ms-4",l.status==="use"?"text-success":"text-error"])},f(l.status==="use"?"\u0E40\u0E1B\u0E34\u0E14\u0E23\u0E31\u0E1A\u0E41\u0E17\u0E07":"\u0E1B\u0E34\u0E14\u0E23\u0E31\u0E1A\u0E41\u0E17\u0E07"),3)]),_:2},1032,["color"])]),_:2},1024)]),_:2},1024),t(h)],64))),256))]),_:1})]),_:1}),t(y,{value:"period"},{default:e(()=>[t(w,null,{default:e(()=>[t(m,{cols:"12",md:"6"},{default:e(()=>[d(f(a.lottoRound.lotto_title),1)]),_:1}),t(m,{class:"text-right",cols:"12",md:"6"},{default:e(()=>[t(_,{onClick:o[1]||(o[1]=l=>g.openModal()),type:"btn"},{default:e(()=>[d(" \u0E40\u0E1E\u0E34\u0E48\u0E21\u0E23\u0E2D\u0E1A\u0E2B\u0E27\u0E22 ")]),_:1})]),_:1})]),_:1}),(u(!0),i(p,null,R(a.rounds,l=>(u(),i(p,null,[t(A,{class:"mt-2"},{append:e(()=>[]),default:e(()=>[t(D,{class:"text-h6"},{default:e(()=>[d(f(l.title),1)]),_:2},1024),t(S,{class:"mt-1"},{default:e(()=>[t(M,{dot:"",location:"start center","offset-x":"2",color:"success",class:"me-3"},{default:e(()=>[Y]),_:1})]),_:1}),t(J,null,{default:e(()=>[Q,s("tbody",null,[(u(!0),i(p,null,R(l.detail,x=>(u(),i("tr",null,[s("td",null,f(x.title),1),s("td",null,f(x.rate),1),q,G]))),256))])]),_:2},1024)]),_:2},1024),t(h)],64))),256))]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(h)]),_:1}),t(P,{modelValue:a.showModalAdd,"onUpdate:modelValue":o[9]||(o[9]=l=>a.showModalAdd=l),"max-width":"800"},{default:e(()=>[t(O,{onClick:o[3]||(o[3]=l=>a.showModalAdd=!1)}),t(C,{title:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E21\u0E32\u0E2A\u0E40\u0E15\u0E2D\u0E23\u0E4C"},{default:e(()=>[t(b,null,{default:e(()=>[t(w,null,{default:e(()=>[t(m,{cols:"12",sm:"12",md:"12"},{default:e(()=>[t(z,{modelValue:a.lottoRound.title,"onUpdate:modelValue":o[4]||(o[4]=l=>a.lottoRound.title=l),label:"\u0E23\u0E2D\u0E1A\u0E2B\u0E27\u0E1A",placeholder:"\u0E23\u0E2D\u0E1A\u0E2B\u0E27\u0E1A"},null,8,["modelValue"])]),_:1}),t(m,{cols:"6",sm:"6",md:"6"},{default:e(()=>[t(v,{modelValue:a.lottoRound.start_date,"onUpdate:modelValue":o[5]||(o[5]=l=>a.lottoRound.start_date=l),label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E23\u0E34\u0E48\u0E21",config:{inline:!0,enableTime:!0,dateFormat:"Y-m-d H:i"}},null,8,["modelValue"])]),_:1}),t(m,{cols:"6",sm:"6",md:"6"},{default:e(()=>[t(v,{modelValue:a.lottoRound.end_date,"onUpdate:modelValue":o[6]||(o[6]=l=>a.lottoRound.end_date=l),label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E2A\u0E34\u0E19\u0E49\u0E2A\u0E38\u0E14",config:{inline:!0,enableTime:!0,dateFormat:"Y-m-d H:i"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(b,{class:"d-flex justify-end flex-wrap gap-3"},{default:e(()=>[t(_,{variant:"tonal",color:"secondary",onClick:o[7]||(o[7]=l=>a.showModalAdd=!1)},{default:e(()=>[d(" Close ")]),_:1}),t(_,{onClick:o[8]||(o[8]=l=>g.saveData())},{default:e(()=>[d(" Save ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const ut=L(H,[["render",K]]);export{ut as default};
