import{_ as A}from"./DialogCloseBtn.a9eea126.js";import{t as N}from"./helpers.0291976c.js";import{y as U,S,o as u,c,p as o,w as s,P as h,O as w,Q as M,E as f,z as m,N as g,m as t,F as v,a as k,v as r,b,L as p,A as P,M as D}from"./index.08e9078e.js";import{V}from"./VSelect.8ea6ce08.js";import{V as T,a as j}from"./VTabs.e0e0f4e0.js";import{V as y}from"./VTable.794b1e77.js";import{V as x}from"./VChip.d13526f8.js";import{V as z}from"./VPagination.f453cc9a.js";import{V as I}from"./VDialog.74576e46.js";import"./VList.2ba00a19.js";import"./VDivider.6a220979.js";import"./scopeId.7dd2bcb9.js";import"./lazy.06c7709b.js";import"./VMenu.80d823a6.js";import"./VCheckboxBtn.79b29e49.js";import"./VSelectionControl.e15bfe62.js";const C=S.create({baseURL:"https://api.niyomlotto.com/"}),L={components:{},data(){return{search_temp:"",agentsSelect:[],lottoGroup:[],sortBy:[{text:"\u0E25\u0E48\u0E32\u0E2A\u0E38\u0E14",value:"desc"},{text:"\u0E40\u0E01\u0E48\u0E32\u0E2A\u0E38\u0E14",value:"asc"}],agent_id:"all",lotto_id:"all",search_member:"all",sort:"desc",showModal:!1,currentPage:1,length:[],items:[],detail:[],headerDetail:{round_name:"",created_at:""},thaiDate:N}},mounted(){this.getAgents(),this.getLotto(),this.getBillCustomer({sort:"desc",page:"1",limit:20})},methods:{async getAgents(){let d=await C.get("/master/get_agen?page=all",{headers:{Authorization:`bearer ${JSON.parse(localStorage.getItem("token"))}`,"Content-type":"application/json"}}).then(n=>n.data).catch(n=>n.response.data),a=[];for(let n of d.result)a.push({text:n.username,value:n.id});const i=[{text:"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14",value:"all"}];this.agentsSelect=i.concat(a)},async getLotto(){let d=await C.get("/admin/lotto-groups",{headers:{Authorization:`bearer ${JSON.parse(localStorage.getItem("token"))}`,"Content-type":"application/json"}}).then(n=>n.data).catch(n=>n.response.data),a=[];for(let n of d.data)a.push({text:n.title,value:n.id});const i=[{text:"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14",value:"all"}];this.lottoGroup=i.concat(a)},async openDetail(d){let a=await S.get("https://api.niyomlotto.com/bill-lotto-detail-user/"+d,{headers:{Authorization:`bearer ${JSON.parse(localStorage.getItem("token"))}`,"Content-type":"application/json"}});this.showModal=!0,this.headerDetail=a.lotto_header,this.detail=a.bill_detail},async getBillCustomer(d=null){const a={search_member:this.search_member,agent_id:this.agent_id,lotto_id:this.lotto_id,sort:this.sort,page:this.currentPage,limit:20,...d};this.agent_id==="all"&&delete a.agent_id,this.search_member==="all"&&delete a.search_member,this.lotto_id==="all"&&delete a.lotto_id;let i=await C.post("/master/bills",a,{headers:{Authorization:`bearer ${JSON.parse(localStorage.getItem("token"))}`,"Content-Type":"application/json"}}).then(n=>n.data).catch(n=>n.response.data);for(let n of i.data.data){n.total_bet=0,n.total_amount=0,n.bill_id=0;for(let l of n.detail)n.total_bet+=l.total_bet,n.total_amount+=l.total_amount,n.bill_id=l.bill_id}this.length=i.data.lastPage,this.items=i.data.data,i&&(this.search_temp=this.search_member)},async clearAllSearch(){this.search_member="all",this.agent_id="all",this.lotto_id="all",this.sort="desc",this.getBillCustomer({sort:"desc",page:"1",limit:20})}}},O=t("h1",null,"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E42\u0E1E\u0E22",-1),G=t("thead",null,[t("tr",null,[t("th",null,"\u0E40\u0E25\u0E02\u0E17\u0E35\u0E48\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23"),t("th",null,"\u0E2A\u0E21\u0E32\u0E0A\u0E34\u0E01"),t("th",null,"\u0E40\u0E2D\u0E40\u0E22\u0E19\u0E15\u0E4C"),t("th",null,"\u0E07\u0E27\u0E14\u0E17\u0E35\u0E48"),t("th",null,"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48/\u0E40\u0E27\u0E25\u0E32"),t("th",null,"\u0E40\u0E07\u0E34\u0E19\u0E40\u0E14\u0E34\u0E21\u0E1E\u0E31\u0E19"),t("th",null,"\u0E1C\u0E25\u0E0A\u0E19\u0E30"),t("th",null,"\u0E2A\u0E16\u0E32\u0E19\u0E30"),t("th",null,"\u0E14\u0E39\u0E42\u0E1E\u0E22")])],-1),J=t("thead",null,[t("tr",{class:"bg-primary"},[t("td",null,"\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E2B\u0E27\u0E22/\u0E07\u0E27\u0E14\u0E17\u0E35\u0E48"),t("td",null,"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E17\u0E33\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23")])],-1),F={key:0},E={key:1},R=t("thead",null,[t("tr",{class:"bg-primary"},[t("th",null,"\u0E40\u0E25\u0E02\u0E2B\u0E27\u0E22"),t("th",null,"\u0E40\u0E25\u0E17\u0E23\u0E32\u0E04\u0E32"),t("th",null,"\u0E40\u0E40\u0E17\u0E07"),t("th",null,"\u0E2D\u0E2D\u0E01\u0E23\u0E32\u0E07\u0E27\u0E31\u0E25"),t("th",null,"\u0E22\u0E2D\u0E14\u0E44\u0E14\u0E49")])],-1);function Q(d,a,i,n,l,_){const B=A;return u(),c("div",null,[o(w,{class:"mb-3"},{default:s(()=>[o(h,null,{default:s(()=>[O]),_:1})]),_:1}),o(w,{justify:"space-between",class:"mb-3"},{default:s(()=>[o(h,{cols:"12",sm:"6",md:"3"},{default:s(()=>[o(M,{label:"\u0E04\u0E49\u0E19\u0E2B\u0E32 Username",modelValue:l.search_member,"onUpdate:modelValue":a[0]||(a[0]=e=>l.search_member=e)},null,8,["modelValue"])]),_:1}),o(h,{cols:"12",sm:"6",md:"2"},{default:s(()=>[o(V,{modelValue:l.sort,"onUpdate:modelValue":a[1]||(a[1]=e=>l.sort=e),items:l.sortBy,"item-title":"text","item-value":"value",label:"\u0E40\u0E23\u0E35\u0E22\u0E07\u0E15\u0E32\u0E21\u0E25\u0E33\u0E14\u0E31\u0E1A"},null,8,["modelValue","items"])]),_:1}),o(h,{cols:"12",sm:"6",md:"2"},{default:s(()=>[o(V,{modelValue:l.agent_id,"onUpdate:modelValue":a[2]||(a[2]=e=>l.agent_id=e),items:l.agentsSelect,"item-title":"text","item-value":"value",label:"\u0E01\u0E23\u0E2D\u0E07\u0E15\u0E32\u0E21\u0E40\u0E2D\u0E40\u0E22\u0E19\u0E15\u0E4C"},null,8,["modelValue","items"])]),_:1}),o(h,{cols:"12",sm:"6",md:"2"},{default:s(()=>[o(V,{modelValue:l.lotto_id,"onUpdate:modelValue":a[3]||(a[3]=e=>l.lotto_id=e),items:l.lottoGroup,"item-title":"text","item-value":"value",label:"\u0E2B\u0E27\u0E22\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14"},null,8,["modelValue","items"])]),_:1}),o(h,{cols:"12",sm:"6",md:"1"},{default:s(()=>[o(f,{onClick:a[4]||(a[4]=e=>_.getBillCustomer()),width:"100%"},{default:s(()=>[m("\u0E04\u0E49\u0E19\u0E2B\u0E32")]),_:1})]),_:1}),o(h,{cols:"12",sm:"6",md:"2"},{default:s(()=>[o(f,{"prepend-icon":"mdi-delete-empty",onClick:a[5]||(a[5]=e=>_.clearAllSearch()),width:"100%",style:{backgroundColor:"red !important",color:"white !important"}},{default:s(()=>[m(" \u0E25\u0E49\u0E32\u0E07\u0E04\u0E48\u0E32\u0E04\u0E49\u0E19\u0E2B\u0E32 ")]),_:1})]),_:1})]),_:1}),o(j,null,{default:s(()=>[o(T,null,{default:s(()=>[m("\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E42\u0E1E\u0E22\u0E2A\u0E21\u0E32\u0E0A\u0E34\u0E01")]),_:1})]),_:1}),o(D,null,{default:s(()=>[o(g,null,{default:s(()=>[o(y,null,{default:s(()=>[G,t("tbody",null,[(u(!0),c(v,null,k(l.items,e=>(u(),c("tr",null,[t("td",null,r(e.id),1),t("td",null,r(e.user.username),1),t("td",null,r(e.agent.username),1),t("td",null,r(e.round.title),1),t("td",null,r(l.thaiDate(e.created_at)),1),t("td",null,r(e.total_bet),1),t("td",null,r(e.total_amount),1),t("td",null,[e.status!="win"&&e.status!="lose"?(u(),b(x,{key:0,color:"primary"},{default:s(()=>[m("\u0E23\u0E31\u0E1A\u0E41\u0E17\u0E07")]),_:1})):p("",!0),e.status=="win"?(u(),b(x,{key:1,color:"success"},{default:s(()=>[m("\u0E0A\u0E19\u0E30")]),_:1})):p("",!0),e.status=="lose"?(u(),b(x,{key:2,color:"error"},{default:s(()=>[m("\u0E41\u0E1E\u0E49")]),_:1})):p("",!0)]),t("td",null,[o(f,{onClick:q=>_.openDetail(e.bill_id),size:"small",class:"mr-2"},{default:s(()=>[o(P,{icon:"tabler-list"}),m(" \u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14 ")]),_:2},1032,["onClick"])])]))),256))])]),_:1})]),_:1}),o(z,{class:"text-center",style:{padding:"10px"},modelValue:l.currentPage,"onUpdate:modelValue":a[6]||(a[6]=e=>l.currentPage=e),length:l.length,onClick:a[7]||(a[7]=e=>_.getBillCustomer()),rounded:"circle"},null,8,["modelValue","length"])]),_:1}),o(I,{modelValue:l.showModal,"onUpdate:modelValue":a[10]||(a[10]=e=>l.showModal=e),"max-width":"800"},{default:s(()=>[o(B,{onClick:a[8]||(a[8]=e=>l.showModal=!1)}),o(D,{title:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E43\u0E19\u0E1A\u0E34\u0E25"},{default:s(()=>[o(g,null,{default:s(()=>[o(y,{density:"compact",class:"text-center"},{default:s(()=>[J,t("tbody",null,[l.headerDetail.round_name==null&&l.headerDetail.round_name==null&&l.headerDetail.round_name==""?(u(),c("tr",F,[t("td",null,r(l.items[0].round.title),1),t("td",null,r(l.thaiDate(l.items[0].created_at)),1)])):p("",!0),l.headerDetail.round_name!=null&&l.headerDetail.round_name!=null&&l.headerDetail.round_name!=""?(u(),c("tr",E,[t("td",null,r(l.headerDetail.round_name),1),t("td",null,r(l.thaiDate(l.headerDetail.created_at)),1)])):p("",!0)])]),_:1}),o(y,{density:"compact",class:"text-center"},{default:s(()=>[R,t("tbody",null,[(u(!0),c(v,null,k(l.detail,e=>(u(),c("tr",null,[t("td",null,r(e.value),1),t("td",null,r(e.rate),1),t("td",null,r(e.bet),1),t("td",null,r(e.award==null?"\u0E23\u0E2D\u0E2D\u0E2D\u0E01\u0E23\u0E32\u0E07\u0E27\u0E31\u0E25":e.award)+" "+r(e.status=="wait"?"":e.status),1),t("td",null,r(e.amount==null?0:e.amount),1)]))),256))])]),_:1})]),_:1}),o(g,{class:"d-flex justify-end flex-wrap gap-3"},{default:s(()=>[o(f,{variant:"tonal",color:"secondary",onClick:a[9]||(a[9]=e=>l.showModal=!1)},{default:s(()=>[m(" Close ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const it=U(L,[["render",Q]]);export{it as default};
