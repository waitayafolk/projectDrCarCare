import{_ as O}from"./DialogCloseBtn.a9eea126.js";import{y as P,S as B,U as p,o as m,c as _,p as s,w as n,P as i,O as V,Q as x,E as c,z as d,N as g,m as e,F as C,a as S,v as r,b as v,A as M,M as w}from"./index.08e9078e.js";import{f as A}from"./helpers.segment.1007a634.js";import{V as T}from"./VSelect.8ea6ce08.js";import{V as y}from"./VTable.794b1e77.js";import{V as U}from"./VChip.d13526f8.js";import{V as j}from"./VPagination.f453cc9a.js";import{V as N}from"./VDialog.74576e46.js";import"./VList.2ba00a19.js";import"./VDivider.6a220979.js";import"./scopeId.7dd2bcb9.js";import"./lazy.06c7709b.js";import"./VMenu.80d823a6.js";import"./VCheckboxBtn.79b29e49.js";import"./VSelectionControl.e15bfe62.js";const f=B.create({baseURL:"https://api.niyomlotto.com/"}),z={components:{},data(){return{currentPage:1,length:0,SearchText:"",selectedOptionSort:"",agent:[],status:[{value:"",text:"\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14"},{value:"use",text:"\u0E1B\u0E01\u0E15\u0E34"},{value:"suspended",text:"\u0E23\u0E30\u0E07\u0E31\u0E1A\u0E01\u0E32\u0E23\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19"}],agents:[{value:"",text:"\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14"}],masters:[],users:[],showModalProfile:!1,showModal:!1,agents_id:"",userDetail:{af_ref:"",credit_balance:"",id:0,mobile:"",name:"",summary_af:0,summary_bet:0,total_bet:0,user_ref:[],user_ref_af:"",username:""},userData:{id:"",brand_id:"",bank_id:"",username:"",password:"",mobile:"",email:"",name:"",birthdate:null,bank_no:"",bank_account:"",changpassword:!1}}},mounted(){this.getUser(),this.getAgents()},methods:{formatNumber:A,async getUser(){const o=await f.post(`/administrator/users/customer?search=${this.SearchText}&agents_id=${this.agents_id}`,{limit:100,sort:"desc",status:this.selectedOptionSort,page:this.currentPage},{headers:{Authorization:`bearer ${JSON.parse(localStorage.getItem("token"))}`,"Content-Type":"application/json"}}).then(t=>t.data).catch(t=>t.response.data);this.length=o.data.lastPage,this.users=o.data.data},async getAgents(){let o=await f.post("/administrator/users/agent",{limit:100,sort:"desc"},{headers:{Authorization:`bearer ${JSON.parse(localStorage.getItem("token"))}`,"Content-type":"application/json"}}).then(t=>t.data).catch(t=>t.response.data);for(let t of o.data.data)this.agents.push({text:t.username,value:t.id})},async select_agents(){const o=await f.post(`/administrator/users/customer?search=${this.SearchText}&agents_id=${this.agents_id}`,{limit:100,sort:"desc",status:this.selectedOptionSort,page:this.currentPage},{headers:{Authorization:`bearer ${JSON.parse(localStorage.getItem("token"))}`,"Content-Type":"application/json"}}).then(t=>t.data).catch(t=>t.response.data);this.length=o.data.lastPage,this.users=o.data.data},async saveData(){(await f.post("/admin/save_users",this.userData,{headers:{Authorization:`bearer ${JSON.parse(localStorage.getItem("token"))}`,"Content-Type":"application/json"}}).then(t=>t.data).catch(t=>t.response.data)).message=="success"?(this.showModal=!1,p.fire({title:"Success!",text:"\u0E17\u0E33\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23 \u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",icon:"success",confirmButtonText:"Ok"}),this.getAgent()):(this.showModal=!1,p.fire({title:"Error!",text:"\u0E17\u0E33\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E44\u0E21\u0E48\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",icon:"error",confirmButtonText:"Ok"}))},async profileCustomer(o){let t=await f.get("/system-get-user-profile/"+o.id,{headers:{Authorization:`bearer ${JSON.parse(localStorage.getItem("token"))}`,"Content-type":"application/json"}}).then(h=>h.data).catch(h=>h.response.data);this.userDetail=t.result,this.showModalProfile=!0},async editData(o){this.userData=o,this.userData.changpassword=!1,this.showModal=!0},async deleteUsers(o){p.fire({title:"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E01\u0E32\u0E23\u0E25\u0E1A?",showCancelButton:!0,confirmButtonText:"\u0E25\u0E1A"}).then(async t=>{t.isConfirmed&&((await f.delete("/admin/del_users/"+o,{headers:{Authorization:`bearer ${JSON.parse(localStorage.getItem("token"))}`,"Content-Type":"application/json"}}).then(b=>b.data).catch(b=>b.response.data)).status=="success"?(this.showModal=!1,p.fire({title:"Success!",text:"\u0E17\u0E33\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23 \u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",icon:"success",confirmButtonText:"Ok"}),this.getUser()):(this.showModal=!1,p.fire({title:"Error!",text:"\u0E17\u0E33\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E44\u0E21\u0E48\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",icon:"error",confirmButtonText:"Ok"})))})}}},I=e("h1",null,"\u0E23\u0E32\u0E22\u0E0A\u0E37\u0E48\u0E2D\u0E2A\u0E21\u0E32\u0E0A\u0E34\u0E01",-1),E=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"\u0E2A\u0E16\u0E32\u0E19\u0E30"),e("th",null,"\u0E22\u0E39\u0E2A\u0E40\u0E0B\u0E2D\u0E23\u0E4C\u0E40\u0E19\u0E21"),e("th",null,"\u0E40\u0E04\u0E23\u0E14\u0E34\u0E15"),e("th",null,"\u0E40\u0E2D\u0E40\u0E22\u0E19\u0E15\u0E4C"),e("th",null,"\u0E21\u0E32\u0E2A\u0E40\u0E15\u0E2D\u0E23\u0E4C"),e("th",null,"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C"),e("th",null,"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E2A\u0E21\u0E31\u0E04\u0E23"),e("th",null,"AF"),e("th",null,"\u0E01\u0E23\u0E30\u0E17\u0E33")])],-1),J={class:"text-center"},F={class:"text-end"},L=e("td",{class:"text-center"},"8%",-1),R=e("thead",null,[e("tr",null,[e("th",{colspan:"4"},[e("h3",null,"\u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14 \u0E22\u0E39\u0E2A\u0E40\u0E0B\u0E2D\u0E23\u0E4C")])])],-1),Q=e("td",null,"Username",-1),Y=e("td",null,"\u0E40\u0E04\u0E23\u0E14\u0E34\u0E15\u0E04\u0E07\u0E40\u0E2B\u0E25\u0E37\u0E2D",-1),q=e("td",null,"\u0E0A\u0E37\u0E48\u0E2D",-1),G=e("td",null,"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E21\u0E37\u0E2D\u0E16\u0E37\u0E2D",-1),H=e("td",null,"\u0E1C\u0E39\u0E49\u0E17\u0E35\u0E48\u0E0A\u0E27\u0E19",-1),K=e("td",null,"\u0E22\u0E2D\u0E14 af \u0E2A\u0E30\u0E2A\u0E21",-1),W=e("td",null,"\u0E22\u0E2D\u0E14\u0E40\u0E40\u0E17\u0E07\u0E2A\u0E30\u0E2A\u0E21",-1),X=e("td",null,"\u0E22\u0E2D\u0E14\u0E40\u0E40\u0E17\u0E07\u0E27\u0E31\u0E19\u0E19\u0E35\u0E49",-1),Z=e("thead",null,[e("tr",null,[e("th",null,"\u0E23\u0E32\u0E22\u0E0A\u0E37\u0E48\u0E2D\u0E17\u0E35\u0E48\u0E0A\u0E27\u0E19"),e("th",null,"\u0E22\u0E2D\u0E14\u0E40\u0E40\u0E17\u0E07"),e("th",null,"\u0E22\u0E2D\u0E14 af"),e("th",null,"\u0E22\u0E2D\u0E14\u0E1D\u0E32\u0E01"),e("th",null,"\u0E22\u0E2D\u0E14\u0E16\u0E2D\u0E19"),e("th",null,"\u0E22\u0E2D\u0E14\u0E04\u0E07\u0E40\u0E2B\u0E25\u0E37\u0E2D")])],-1);function $(o,t,h,b,a,u){const D=O;return m(),_("div",null,[s(V,{class:"mb-3"},{default:n(()=>[s(i,null,{default:n(()=>[I]),_:1})]),_:1}),s(V,{justify:"space-between",class:"mb-3"},{default:n(()=>[s(i,{md:"5"},{default:n(()=>[s(x,{label:"\u0E04\u0E49\u0E19\u0E2B\u0E32",modelValue:a.SearchText,"onUpdate:modelValue":t[0]||(t[0]=l=>a.SearchText=l),"prepend-inner-icon":"tabler-search"},null,8,["modelValue"])]),_:1}),s(i,{md:"5",class:"text-end"},{default:n(()=>[s(V,{justify:"space-end"},{default:n(()=>[s(i,{md:"5"},{default:n(()=>[s(T,{items:a.status,modelValue:a.selectedOptionSort,"onUpdate:modelValue":t[1]||(t[1]=l=>a.selectedOptionSort=l),"item-title":"text","item-value":"value",label:"\u0E2A\u0E16\u0E32\u0E19\u0E30"},null,8,["items","modelValue"])]),_:1}),s(i,{md:"5"},{default:n(()=>[s(T,{modelValue:a.agents_id,"onUpdate:modelValue":t[2]||(t[2]=l=>a.agents_id=l),label:"\u0E40\u0E2D\u0E40\u0E22\u0E19\u0E15\u0E4C",items:a.agents,"item-title":"text","item-value":"value"},null,8,["modelValue","items"])]),_:1}),s(i,{md:"2"},{default:n(()=>[s(c,{onClick:t[3]||(t[3]=l=>u.select_agents())},{default:n(()=>[d(" \u0E04\u0E49\u0E19\u0E2B\u0E32 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(w,null,{default:n(()=>[s(g,null,{default:n(()=>[s(y,null,{default:n(()=>[E,e("tbody",null,[(m(!0),_(C,null,S(a.users,l=>(m(),_("tr",null,[e("td",null,r(l.id),1),e("td",J,[l.status=="use"?(m(),v(U,{key:0,color:"success"},{default:n(()=>[d("\u0E1B\u0E01\u0E15\u0E34")]),_:1})):(m(),v(U,{key:1,color:"error"},{default:n(()=>[d("\u0E23\u0E30\u0E07\u0E31\u0E1A\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19")]),_:1}))]),e("td",null,r(l.username),1),e("td",F,r(u.formatNumber(l.credit_balance)),1),e("td",null,r(l.agent.username),1),e("td",null,r(l.master.username),1),e("td",null,r(l.mobile),1),e("td",null,r(`${new Date(l.created_at).getFullYear()}-${new Date(l.created_at).getMonth()+1}-${new Date(l.created_at).getDate()}`),1),L,e("td",null,[s(c,{onClick:k=>u.profileCustomer(l),size:"small",class:"mr-2"},{default:n(()=>[d(" \u0E42\u0E1B\u0E23\u0E44\u0E1F\u0E25\u0E4C ")]),_:2},1032,["onClick"]),s(c,{onClick:k=>u.editData(l),size:"small",class:"mr-2"},{default:n(()=>[s(M,{icon:"tabler-settings"}),d(" \u0E41\u0E01\u0E49\u0E44\u0E02 ")]),_:2},1032,["onClick"]),s(c,{onClick:k=>u.deleteUsers(l.id),color:"error",size:"small"},{default:n(()=>[s(M,{icon:"tabler-x"})]),_:2},1032,["onClick"])])]))),256))])]),_:1})]),_:1}),s(j,{class:"text-center",style:{padding:"10px"},modelValue:a.currentPage,"onUpdate:modelValue":t[4]||(t[4]=l=>a.currentPage=l),length:a.length,onClick:t[5]||(t[5]=l=>u.getUser()),rounded:"circle"},null,8,["modelValue","length"])]),_:1}),s(N,{modelValue:a.showModal,"onUpdate:modelValue":t[12]||(t[12]=l=>a.showModal=l),"max-width":"800"},{default:n(()=>[s(D,{onClick:t[6]||(t[6]=l=>a.showModal=!1)}),s(w,{title:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E1C\u0E39\u0E49\u0E0A\u0E48\u0E27\u0E22\u0E41\u0E2D\u0E14\u0E21\u0E34\u0E19"},{default:n(()=>[s(g,null,{default:n(()=>[s(V,null,{default:n(()=>[s(i,{cols:"6",sm:"6",md:"6"},{default:n(()=>[s(x,{modelValue:a.userData.name,"onUpdate:modelValue":t[7]||(t[7]=l=>a.userData.name=l),label:"\u0E0A\u0E37\u0E48\u0E2D\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19",placeholder:"\u0E0A\u0E37\u0E48\u0E2D\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19"},null,8,["modelValue"])]),_:1}),s(i,{cols:"6",sm:"6",md:"6"},{default:n(()=>[s(x,{modelValue:a.userData.email,"onUpdate:modelValue":t[8]||(t[8]=l=>a.userData.email=l),label:"E-mail",placeholder:"E-mail"},null,8,["modelValue"])]),_:1}),s(i,{cols:"6",sm:"6",md:"6"},{default:n(()=>[s(x,{modelValue:a.userData.mobile,"onUpdate:modelValue":t[9]||(t[9]=l=>a.userData.mobile=l),label:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23",placeholder:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23"},null,8,["modelValue"])]),_:1}),s(i,{cols:"6",sm:"6",md:"6"})]),_:1})]),_:1}),s(g,{class:"d-flex justify-end flex-wrap gap-3"},{default:n(()=>[s(c,{variant:"tonal",color:"secondary",onClick:t[10]||(t[10]=l=>a.showModal=!1)},{default:n(()=>[d(" Close ")]),_:1}),s(c,{onClick:t[11]||(t[11]=l=>u.saveData())},{default:n(()=>[d(" Save ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(N,{modelValue:a.showModalProfile,"onUpdate:modelValue":t[15]||(t[15]=l=>a.showModalProfile=l),"max-width":"800"},{default:n(()=>[s(D,{onClick:t[13]||(t[13]=l=>a.showModalProfile=!1)}),s(w,null,{default:n(()=>[s(g,null,{default:n(()=>[s(y,{density:"compact"},{default:n(()=>[R,e("tbody",null,[e("tr",null,[Q,e("td",null,r(a.userDetail.username),1),Y,e("td",null,r(u.formatNumber(a.userDetail.credit_balance)),1)]),e("tr",null,[q,e("td",null,r(a.userDetail.name),1),G,e("td",null,r(a.userDetail.mobile),1)]),e("tr",null,[H,e("td",null,r(a.userDetail.user_ref_af?a.userDetail.user_ref_af:"-"),1),K,e("td",null,r(u.formatNumber(a.userDetail.summary_af)),1)]),e("tr",null,[W,e("td",null,r(u.formatNumber(a.userDetail.total_bet)),1),X,e("td",null,r(a.userDetail.total_bet?u.formatNumber(a.userDetail.summary_bet):0),1)])])]),_:1}),s(y,{density:"compact",class:"mt-3"},{default:n(()=>[Z,e("tbody",null,[(m(!0),_(C,null,S(a.userDetail.user_ref,l=>(m(),_("tr",null,[e("td",null,r(l.username),1),e("td",null,r(l.summary_bet),1),e("td",null,r(l.summary_af),1),e("td",null,r(l.credit_deposit),1),e("td",null,r(l.credit_withdraw),1),e("td",null,r(l.credit_balance),1)]))),256))])]),_:1})]),_:1}),s(g,{class:"d-flex justify-end flex-wrap gap-3"},{default:n(()=>[s(c,{variant:"tonal",color:"secondary",onClick:t[14]||(t[14]=l=>a.showModalProfile=!1)},{default:n(()=>[d(" Close ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const pe=P(z,[["render",$]]);export{pe as default};
